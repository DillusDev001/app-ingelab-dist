"use strict";(self.webpackChunkapp_ingelab=self.webpackChunkapp_ingelab||[]).push([[224],{5224:(V,Z,s)=>{s.r(Z),s.d(Z,{RecepcionModule:()=>P});var _=s(6814),e=s(2232),u=s(95),L=s(3995),y=s(2095),R=s(5528),v=s(2999),t=s(4946),A=s(4698),T=s(1166),l=s(9924),S=s(3325),E=s(2526),w=s(9564),z=s(8613),C=s(6833);function O(n,x){if(1&n){const i=t.EpF();t.TgZ(0,"app-recepcion-frx",4),t.NdJ("response",function(d){t.CHM(i);const o=t.oxw();return t.KtG(o.recepcionResponse(d))}),t.qZA()}if(2&n){const i=t.oxw();t.Q6J("typeRecive",i.showFormularioFRX)("codeRecive",i.codeFormularioFRX)}}function N(n,x){1&n&&t._UZ(0,"app-custom-loading")}function J(n,x){if(1&n){const i=t.EpF();t.TgZ(0,"app-custom-button",20),t.NdJ("click",function(){t.CHM(i);const d=t.oxw(2);return t.KtG(d.onClickAgregar())}),t.qZA()}if(2&n){const i=t.oxw(2);t.Tol("h-full"),t.Q6J("label","Nueva Cotizaci\xf3n")("type","accept")("icon","")("valid",i.formBusqueda.valid)}}function j(n,x){if(1&n){const i=t.EpF();t.TgZ(0,"p",27),t.NdJ("click",function(){t.CHM(i);const d=t.oxw().index,o=t.oxw(2);return t.KtG(o.onClickIniciar(d))}),t._uU(1," Iniciar "),t.qZA()}}function M(n,x){if(1&n&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&n){const i=t.oxw().$implicit;t.xp6(1),t.Oqu(i.user_asignado)}}function U(n,x){if(1&n){const i=t.EpF();t.TgZ(0,"p",28),t.NdJ("click",function(){t.CHM(i);const d=t.oxw().index,o=t.oxw(2);return t.KtG(o.onClickFinalizar(d))}),t._uU(1," Finalizar "),t.qZA()}}function Q(n,x){if(1&n){const i=t.EpF();t.TgZ(0,"tr",21)(1,"td",22),t.NdJ("click",function(){const o=t.CHM(i).index,a=t.oxw(2);return t.KtG(a.onClickListaElement(o))}),t._uU(2),t.qZA(),t.TgZ(3,"td",23),t._uU(4),t.ALo(5,"date"),t.qZA(),t.TgZ(6,"td",23),t._uU(7),t.qZA(),t.TgZ(8,"td",23),t.YNc(9,j,2,0,"p",24),t.YNc(10,M,2,1,"p",2),t.qZA(),t.TgZ(11,"td",23),t._uU(12),t.ALo(13,"date"),t.qZA(),t.TgZ(14,"td",23),t._uU(15),t.ALo(16,"date"),t.qZA(),t.TgZ(17,"td",25),t.YNc(18,U,2,0,"p",26),t.qZA()()}if(2&n){const i=x.$implicit;t.xp6(2),t.Oqu(i.cod_cotizacion),t.xp6(2),t.Oqu(t.xi3(5,8,i.fec_recepcion,"dd-MM-yyyy")),t.xp6(3),t.Oqu(i.user_recepcion),t.xp6(2),t.Q6J("ngIf",""==i.user_asignado),t.xp6(1),t.Q6J("ngIf",""!==i.user_asignado),t.xp6(2),t.Oqu(t.xi3(13,11,i.fec_ini,"dd-MM-yyyy")),t.xp6(3),t.Oqu(t.xi3(16,14,i.fec_fin,"dd-MM-yyyy")),t.xp6(3),t.Q6J("ngIf",""!=i.fec_ini&&""==i.fec_fin)}}function q(n,x){if(1&n){const i=t.EpF();t.TgZ(0,"div",5)(1,"div",6)(2,"div",7)(3,"form",8),t._UZ(4,"app-custom-drop-box",9)(5,"app-custom-input",10),t.TgZ(6,"app-custom-icon",11),t.NdJ("click",function(){t.CHM(i);const d=t.oxw();return t.KtG(d.onClickBusqueda())}),t.qZA()()(),t.YNc(7,J,1,6,"app-custom-button",12),t.qZA(),t.TgZ(8,"div",13)(9,"div",14)(10,"table",15)(11,"thead",16)(12,"tr")(13,"th",17),t._uU(14,"C\xf3digo Cotizaci\xf3n"),t.qZA(),t.TgZ(15,"th",17),t._uU(16,"Fecha Recepci\xf3n"),t.qZA(),t.TgZ(17,"th",17),t._uU(18,"Usuario Recepci\xf3n"),t.qZA(),t.TgZ(19,"th",17),t._uU(20,"Asignado"),t.qZA(),t.TgZ(21,"th",17),t._uU(22,"Fecha Inicio"),t.qZA(),t.TgZ(23,"th",17),t._uU(24,"Fecha Finalizaci\xf3n"),t.qZA(),t._UZ(25,"th",17),t.qZA()(),t.TgZ(26,"tbody"),t.YNc(27,Q,19,17,"tr",18),t.qZA()()(),t._UZ(28,"nav",19),t.qZA()()}if(2&n){const i=t.oxw();t.xp6(3),t.Q6J("formGroup",i.formBusqueda),t.xp6(1),t.Tol("w-max"),t.Q6J("id","id_pregunta")("label","B\xfasqueda...")("control",i.formBusqueda.controls.busqueda)("data",i.dataBusquedaCotizacion),t.xp6(1),t.Tol("w-full flex-grow"),t.Q6J("id","id_busqueda_value")("label","B\xfasqueda...")("type","text")("autocomplete","")("control",i.formBusqueda.controls.value)("icon",""),t.xp6(1),t.Tol("h-full "),t.Q6J("icon","fa-solid fa-magnifying-glass fa-xl align-bottom cursor-pointer"),t.xp6(1),t.Q6J("ngIf",!1),t.xp6(20),t.Q6J("ngForOf",i.dataRecepcion)}}const k=[{path:"frx",component:C.k},{path:"lista/frx",component:(()=>{class n{constructor(i,r,d){this.router=i,this.toast=r,this.recepcionFrxService=d,this.dataLocalStorage={usuario:null,loggedDate:""},this.isLoading=!0,this.msgAlert="",this.formBusqueda=new u.cw({busqueda:new u.NI("cod_cotizacion",[]),value:new u.NI("",[])}),this.dataBusquedaCotizacion=y.jt,this.dataRecepcion=[],this.showRecepcionFRX=!1,this.showFormularioFRX="",this.codeFormularioFRX="",null!=(0,v.WX)()?(this.dataLocalStorage=(0,v.WX)(),null!=this.dataLocalStorage.usuario?this.userLogeado=this.dataLocalStorage.usuario:((0,v.rr)(),(0,R.ni)(this.router))):((0,v.rr)(),(0,R.ni)(this.router))}ngOnInit(){(0,L.wQ)(),this.getListaRecepcionFrx()}onClickBusqueda(){const i=String(this.formBusqueda.controls.value.value);this.buscarRecepcionFRX(i)}onClickAgregar(){}onClickListaElement(i){this.showFormularioFRX="ver",this.codeFormularioFRX=this.dataRecepcion[i].cod_cotizacion,this.showRecepcionFRX=!0}onClickIniciar(i){this.isLoading=!0;const r=this.dataRecepcion[i],d={user_asignado:this.userLogeado.user,fec_ini:(0,_.p6)(new Date,"yyyy-MM-dd","es"),user_mod:this.userLogeado.user};this.actualizarRecepcionFRX(r.cod_cotizacion,d)}onClickFinalizar(i){const r=this.dataRecepcion[i];if(r.user_asignado==this.userLogeado.user){const d={user_asignado:this.userLogeado.user,fec_fin:(0,_.p6)(new Date,"yyyy-MM-dd","es"),user_mod:this.userLogeado.user};this.actualizarRecepcionFRX(r.cod_cotizacion,d)}else this.customErrorToast("El usuario actual no es el mismo que ha iniciado el trabajo")}getListaRecepcionFrx(){this.dataRecepcion=[],this.recepcionFrxService.recepcionFrxGet().subscribe(i=>{i.rows>0&&(this.dataRecepcion=i.data),this.isLoading=!1})}buscarRecepcionFRX(i){this.recepcionFrxService.recepcionFrxGetUno(i).subscribe(r=>{r.boolean?this.dataRecepcion=r.data:this.customErrorToast(r.message)})}actualizarRecepcionFRX(i,r){this.isLoading=!0,this.recepcionFrxService.recepcionFrxActualizar(i,r).subscribe(d=>{d.boolean?this.getListaRecepcionFrx():this.customErrorToast(d.message),this.isLoading=!1})}recepcionResponse(i){this.showRecepcionFRX=!1}customSuccessToast(i){this.toast.success(i,{duration:2e3,style:{border:"1px solid #2e798c",padding:"16px",color:"#2b6273"},iconTheme:{primary:"#3494a6",secondary:"#FFFAEE"}})}customErrorToast(i){this.toast.error(i,{duration:2e3,style:{border:"1px solid #ef445f",padding:"16px",color:"#ef445f"},iconTheme:{primary:"#ef445f",secondary:"#FFFAEE"}})}customLoadingToast(i){this.toast.loading(i,{duration:1e4,style:{border:"1px solid #2b59c3",padding:"16px",color:"#2b59c3"},iconTheme:{primary:"#2b59c3",secondary:"#FFFAEE"}})}static#e=this.\u0275fac=function(r){return new(r||n)(t.Y36(e.F0),t.Y36(A.jE),t.Y36(T.J))};static#t=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-recepcion-frx-lista"]],decls:4,vars:3,consts:[[1,"relative","w-full","h-full","shadow-lg","overflow-auto"],[3,"typeRecive","codeRecive","response",4,"ngIf"],[4,"ngIf"],["class","flex flex-col gap-2 w-full h-full",4,"ngIf"],[3,"typeRecive","codeRecive","response"],[1,"flex","flex-col","gap-2","w-full","h-full"],[1,"flex","flex-wrap","gap-2","h-max","border","rounded-lg","border-color-text","p-2","divide-x"],[1,"flex-grow"],[1,"flex","gap-1",3,"formGroup"],[3,"id","label","control","data"],[1,"flex-grow",3,"id","label","type","autocomplete","control","icon"],[3,"icon","click"],["class","pl-6",3,"label","type","icon","class","valid","click",4,"ngIf"],[1,"flex","flex-col","gap-4","w-full","h-full"],[1,"overflow-auto","shadow-md","border","rounded-lg","grow"],[1,"w-max","md:w-full","text-sm","text-center","rtl:text-right","text-primary-500","table-fixed","md:table-auto"],[1,"text-sm","text-primary-800","uppercase","bg-primary-50"],["scope","col",1,"px-6","py-3"],["class","text-primary-800 bg-white border-b hover:bg-primary-50",4,"ngFor","ngForOf"],["aria-label","Table navigation",1,"flex","items-center","flex-column","flex-wrap","h-max","md:flex-row","justify-between"],[1,"pl-6",3,"label","type","icon","valid","click"],[1,"text-primary-800","bg-white","border-b","hover:bg-primary-50"],[1,"px-2","py-2","cursor-pointer",3,"click"],[1,"px-2","py-2"],["class","underline underline-offset-1 cursor-pointer",3,"click",4,"ngIf"],[1,"px-2","py-2","cursor-pointer"],["class","underline underline-offset-1",3,"click",4,"ngIf"],[1,"underline","underline-offset-1","cursor-pointer",3,"click"],[1,"underline","underline-offset-1",3,"click"]],template:function(r,d){1&r&&(t.TgZ(0,"div",0),t.YNc(1,O,1,2,"app-recepcion-frx",1),t.YNc(2,N,1,0,"app-custom-loading",2),t.YNc(3,q,29,20,"div",3),t.qZA()),2&r&&(t.xp6(1),t.Q6J("ngIf",d.showRecepcionFRX),t.xp6(1),t.Q6J("ngIf",d.isLoading),t.xp6(1),t.Q6J("ngIf",!d.isLoading&&!d.showRecepcionFRX))},dependencies:[_.sg,_.O5,l.x,S.E,E.l,w.O,z.m,u._Y,u.JL,u.sg,C.k,_.uU]})}return n})()},{path:"generales",component:(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-recepcion-generales"]],decls:2,vars:0,template:function(r,d){1&r&&(t.TgZ(0,"p"),t._uU(1,"recepcion-generales works!"),t.qZA())}})}return n})()},{path:"lista/generales",component:(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-recepcion-generales-lista"]],decls:2,vars:0,template:function(r,d){1&r&&(t.TgZ(0,"p"),t._uU(1,"recepcion-generales-lista works!"),t.qZA())}})}return n})()}];let X=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=t.oAB({type:n});static#o=this.\u0275inj=t.cJS({imports:[e.Bz.forChild(k),e.Bz]})}return n})();var Y=s(8524);let P=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=t.oAB({type:n});static#o=this.\u0275inj=t.cJS({imports:[_.ez,X,Y.m]})}return n})()},6833:(V,Z,s)=>{s.d(Z,{k:()=>i});var _=s(6814),e=s(4946),u=s(95),L=s(3995),y=s(2095),R=s(5528),v=s(2999),t=s(7069),A=s(6236);function T(r){return""===r?"":(0,_.p6)(r,"dd-MM-yyyy","es")}t.vfs=A.I.vfs;const l="#000000";var E=s(2232),w=s(4698),z=s(1166),C=s(7459),O=s(9862);let N=(()=>{class r{constructor(o){this.http=o,this.urlBase=C.a,this.urlVersion="/v1",this.urlModule="/orden-frx"}ordenFrxRegistro(o){return this.http.post(this.urlBase+this.urlVersion+this.urlModule,o)}ordenFrxGet(o){return this.http.get(this.urlBase+this.urlVersion+this.urlModule+"/"+o)}ordenFrxActualizar(o,a){return this.http.patch(this.urlBase+this.urlVersion+this.urlModule+"/"+o,a)}static#e=this.\u0275fac=function(a){return new(a||r)(e.LFG(O.eN))};static#t=this.\u0275prov=e.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();var J=s(1966),j=s(8295),M=s(2931),U=s(8496),Q=s(9924),q=s(3325),D=s(9564),B=s(6994),G=s(8613),k=s(7614),X=s(8343);function Y(r,d){1&r&&e._UZ(0,"app-custom-loading")}function P(r,d){if(1&r&&(e.TgZ(0,"div",5)(1,"div",6),e._UZ(2,"app-custom-sub-title",7),e.qZA(),e.TgZ(3,"div",8),e._UZ(4,"app-custom-label1",9)(5,"app-custom-label1",9)(6,"app-custom-label1",9),e.qZA()()),2&r){const o=e.oxw(2);e.xp6(2),e.Tol(""),e.Q6J("id","")("label","Datos Asignaci\xf3n"),e.xp6(2),e.Tol(""),e.Q6J("id","")("label","Fecha Inicio")("text",o.transformFecha("Inicio")),e.xp6(1),e.Tol(""),e.Q6J("id","")("label","Fecha Finalizaci\xf3n")("text",o.transformFecha("Fin")),e.xp6(1),e.Tol(""),e.Q6J("id","")("label","T\xe9cnico Asignado")("text",o.objTecnicoAsignado.nombres+" "+o.objTecnicoAsignado.apellidos)}}function n(r,d){if(1&r){const o=e.EpF();e.TgZ(0,"app-custom-button",17),e.NdJ("click",function(){e.CHM(o);const p=e.oxw(2);return e.KtG(p.onClickAgregarMiLista())}),e.qZA()}2&r&&(e.Tol(""),e.Q6J("id","id_btn_guardar")("label","Agregar a Asignaci\xf3n")("type","cancel")("icon","")("valid",!0))}function x(r,d){if(1&r){const o=e.EpF();e.TgZ(0,"div",3),e._UZ(1,"app-custom-title",4),e.TgZ(2,"div",5)(3,"div",6),e._UZ(4,"app-custom-sub-title",7),e.qZA(),e.TgZ(5,"div",8),e._UZ(6,"app-custom-label1",9)(7,"app-custom-label1",9)(8,"app-custom-label1",9),e.qZA()(),e.YNc(9,P,7,19,"div",10),e.TgZ(10,"div",11),e._UZ(11,"app-custom-sub-title",12),e.qZA(),e.TgZ(12,"form",13)(13,"div",14)(14,"div",5)(15,"div",6),e._UZ(16,"app-custom-sub-title",7),e.qZA(),e.TgZ(17,"div",14),e._UZ(18,"app-custom-input",15)(19,"app-custom-input",15),e.qZA()(),e.TgZ(20,"div",5)(21,"div",6),e._UZ(22,"app-custom-sub-title",7),e.qZA(),e.TgZ(23,"div",14),e._UZ(24,"app-custom-drop-box",16)(25,"app-custom-drop-box",16),e.qZA()()(),e.TgZ(26,"div",14)(27,"div",5)(28,"div",6),e._UZ(29,"app-custom-sub-title",7),e.qZA(),e.TgZ(30,"div",14),e._UZ(31,"app-custom-drop-box",16),e.qZA()(),e.TgZ(32,"div",5)(33,"div",6),e._UZ(34,"app-custom-sub-title",7),e.qZA(),e.TgZ(35,"div",14),e._UZ(36,"app-custom-input",15),e.qZA()(),e.TgZ(37,"div",5)(38,"div",6),e._UZ(39,"app-custom-sub-title",7),e.qZA(),e.TgZ(40,"div",14),e._UZ(41,"app-custom-drop-box",16),e.qZA()()(),e.TgZ(42,"div",14)(43,"div",5)(44,"div",6),e._UZ(45,"app-custom-sub-title",7),e.qZA(),e.TgZ(46,"div",14),e._UZ(47,"app-custom-drop-box",16)(48,"app-custom-input",15),e.qZA()(),e.TgZ(49,"div",5)(50,"div",6),e._UZ(51,"app-custom-sub-title",7),e.qZA(),e.TgZ(52,"div",14),e._UZ(53,"app-custom-drop-box",16)(54,"app-custom-input",15),e.qZA()()()(),e.TgZ(55,"div",14)(56,"app-custom-button",17),e.NdJ("click",function(){e.CHM(o);const p=e.oxw();return e.KtG(p.onClickPDF("imprimir"))}),e.qZA(),e.TgZ(57,"app-custom-button",17),e.NdJ("click",function(){e.CHM(o);const p=e.oxw();return e.KtG(p.onClickPDF("descargar"))}),e.qZA(),e.TgZ(58,"app-custom-button",17),e.NdJ("click",function(){e.CHM(o);const p=e.oxw();return e.KtG(p.onClickCerrar())}),e.qZA(),e.YNc(59,n,1,7,"app-custom-button",18),e.qZA()()}if(2&r){const o=e.oxw();e.xp6(1),e.Tol("uppercase w-full h-full text-3xl"),e.Q6J("id","id_titlte")("label","FORMULARIO DE RECEPCI\xd3N"),e.xp6(3),e.Tol(""),e.Q6J("id","")("label","Datos Recepci\xf3n"),e.xp6(2),e.Tol(""),e.Q6J("id","")("label","C\xf3digo FRX")("text",o.objRecepcion.cod_cotizacion),e.xp6(1),e.Tol(""),e.Q6J("id","")("label","Fecha Recepci\xf3n")("text",o.transformFecha("Recepcion")),e.xp6(1),e.Tol(""),e.Q6J("id","")("label","T\xe9cnico Recepci\xf3n")("text",o.objTecnicoRecepcion.nombres+" "+o.objTecnicoRecepcion.apellidos),e.xp6(1),e.Q6J("ngIf",""!==o.objRecepcion.fec_ini),e.xp6(2),e.Tol(""),e.Q6J("id","")("label","Datos Orden Servicio"),e.xp6(5),e.Tol(""),e.Q6J("id","")("label","El servicio se realizar\xe1:"),e.xp6(2),e.Tol(""),e.Q6J("id","id_input_")("label","Desde fecha")("type","date")("autocomplete","")("control",o.formImpresion.controls.desde_fecha)("icon",""),e.xp6(1),e.Tol(""),e.Q6J("id","id_input_")("label","Hasta fecha")("type","date")("autocomplete","")("control",o.formImpresion.controls.hasta_fecha)("icon",""),e.xp6(3),e.Tol(""),e.Q6J("id","")("label","Lugar Servicio / Gastos Log\xedsticos"),e.xp6(2),e.Tol(""),e.Q6J("id","")("label","Lugar Servicio...")("control",o.formImpresion.controls.lugar)("data",o.dataLugarServicio),e.xp6(1),e.Tol(""),e.Q6J("id","")("label","Gastos Log\xedsticos...")("control",o.formImpresion.controls.asumido)("data",o.dataGastosLogisticos),e.xp6(4),e.Tol(""),e.Q6J("id","")("label","Reporte Incertidumbre"),e.xp6(2),e.Tol(""),e.Q6J("id","")("label","Reporte Incertidumbre...")("control",o.formImpresion.controls.incertidumbre)("data",o.dataYesNo),e.xp6(3),e.Tol(""),e.Q6J("id","")("label","Entrega de informe"),e.xp6(2),e.Tol(""),e.Q6J("id","id_input_resultado_fecha")("label","Fecha Resultados")("type","date")("autocomplete","")("control",o.formImpresion.controls.entrega)("icon",""),e.xp6(3),e.Tol(""),e.Q6J("id","")("label","Mediante"),e.xp6(2),e.Tol(""),e.Q6J("id","")("label","Mediante...")("control",o.formImpresion.controls.mediante)("data",o.dataMediante),e.xp6(4),e.Tol(""),e.Q6J("id","")("label","El pago por el servicio se realizar\xe1:"),e.xp6(2),e.Tol(""),e.Q6J("id","")("label","...")("control",o.formImpresion.controls.pago)("data",o.dataElPago),e.xp6(1),e.Tol(""),e.Q6J("id","id_input_")("label","Hasta fecha")("type","date")("autocomplete","")("control",o.formImpresion.controls.pago_hasta)("icon",""),e.xp6(3),e.Tol(""),e.Q6J("id","")("label","Factura por el servicio se emitir\xe1:"),e.xp6(2),e.Tol(""),e.Q6J("id","")("label","...")("control",o.formImpresion.controls.factura)("data",o.dataLaFactura),e.xp6(1),e.Tol(""),e.Q6J("id","id_input_")("label","Hasta fecha")("type","date")("autocomplete","")("control",o.formImpresion.controls.factura_hasta)("icon",""),e.xp6(2),e.Tol(""),e.Q6J("id","id_btn_guardar")("label","Imprimir")("type","accept")("icon","")("valid",o.formImpresion.valid),e.xp6(1),e.Tol(""),e.Q6J("id","id_btn_guardar")("label","Descargar")("type","cancel")("icon","")("valid",o.formImpresion.valid),e.xp6(1),e.Tol(""),e.Q6J("id","id_btn_guardar")("label","Cerrar")("type","accept")("icon","")("valid",!0),e.xp6(1),e.Q6J("ngIf",o.ordenPagoIsSaved&&""===o.objRecepcion.user_asignado)}}let i=(()=>{class r{constructor(o,a,p,f,h,I,g,F){this.router=o,this.toast=a,this.recepcionFrxService=p,this.ordenFrxService=f,this.usuarioService=h,this.cotizacionFrxService=I,this.muestraFrxService=g,this.personaService=F,this.response=new e.vpe,this.dataLocalStorage={usuario:null,loggedDate:""},this.isLoading=!0,this.msgAlert="",this.formImpresion=new u.cw({desde_fecha:new u.NI("",[u.kI.required]),hasta_fecha:new u.NI("",[u.kI.required]),lugar:new u.NI("",[u.kI.required]),asumido:new u.NI("",[u.kI.required]),incertidumbre:new u.NI("",[u.kI.required]),entrega:new u.NI("",[u.kI.required]),mediante:new u.NI("",[u.kI.required]),pago:new u.NI("",[u.kI.required]),pago_hasta:new u.NI("",[u.kI.required]),factura:new u.NI("",[u.kI.required]),factura_hasta:new u.NI("",[u.kI.required])}),this.objRecepcion={cod_cotizacion:"",fec_recepcion:"",user_recepcion:"",observaciones:"",user_asignado:"",fec_ini:"",fec_fin:"",estado:0,fec_crea:"",user_crea:"",fec_mod:"",user_mod:""},this.objOrden={cod_cotizacion:"",desde_fecha:"",hasta_fecha:"",lugar:"",asumido:"",incertidumbre:"",entrega:"",mediante:"",pago:"",pago_hasta:"",factura:"",factura_hasta:""},this.objCotizacionFRX={cod_cotizacion:"",fec_solicitud:"",fec_emision:"",id_servicio:0,id_persona:0,observacion:"",costo_total:0,descuento:0,total_pagar:0,fec_crea:"",user_crea:"",fec_mod:"",user_mod:""},this.dataMuestras=[],this.objPersona={id_persona:0,nombre_persona:"",celular:"",email:"",razon:"",nit:"",id_empresa:0,fec_crea:"",user_crea:"",fec_mod:"",user_mod:""},this.objTecnicoRecepcion={user:"",codigo:"",nombres:"",apellidos:"",code:"",celular:"",telefono:"",ci:"",exp:"",sexo:"",est_civil:"",fec_nac:"",banco:"",nro_cuenta:"",fec_ingreso:"",fec_baja:"",rol:"",img:"",estado:0,fec_crea:"",user_mod:"",fec_mod:""},this.objTecnicoAsignado={user:"",codigo:"",nombres:"",apellidos:"",code:"",celular:"",telefono:"",ci:"",exp:"",sexo:"",est_civil:"",fec_nac:"",banco:"",nro_cuenta:"",fec_ingreso:"",fec_baja:"",rol:"",img:"",estado:0,fec_crea:"",user_mod:"",fec_mod:""},this.ordenPagoIsSaved=!1,this.typePDF="",this.dataLugarServicio=y.cS,this.dataGastosLogisticos=y.sC,this.dataMediante=y.rH,this.dataElPago=y.j0,this.dataLaFactura=y.J3,this.dataYesNo=y.pY,this.soloTecnico=!1,null!=(0,v.WX)()?(this.dataLocalStorage=(0,v.WX)(),null!=this.dataLocalStorage.usuario?this.userLogeado=this.dataLocalStorage.usuario:((0,v.rr)(),(0,R.ni)(this.router))):((0,v.rr)(),(0,R.ni)(this.router))}ngOnInit(){(0,L.wQ)(),this.getRecepcion()}transformFecha(o){switch(o){case"Recepcion":let a=this.objRecepcion.fec_recepcion;return""!==a?(0,_.p6)(a,"dd/MM/yyyy","es"):"";case"Inicio":let p=this.objRecepcion.fec_ini;return""!==p?(0,_.p6)(p,"dd/MM/yyyy","es"):"";case"Fin":let f=this.objRecepcion.fec_fin;return""!==f?(0,_.p6)(f,"dd/MM/yyyy","es"):"";default:return""}}setDataFormImpresion(){this.formImpresion.controls.desde_fecha.setValue(this.objOrden.desde_fecha),this.formImpresion.controls.hasta_fecha.setValue(this.objOrden.hasta_fecha),this.formImpresion.controls.lugar.setValue(this.objOrden.lugar),this.formImpresion.controls.asumido.setValue(this.objOrden.asumido),this.formImpresion.controls.incertidumbre.setValue(this.objOrden.incertidumbre),this.formImpresion.controls.entrega.setValue(this.objOrden.entrega),this.formImpresion.controls.mediante.setValue(this.objOrden.mediante),this.formImpresion.controls.pago.setValue(this.objOrden.pago),this.formImpresion.controls.pago_hasta.setValue(this.objOrden.pago_hasta),this.formImpresion.controls.factura.setValue(this.objOrden.factura),this.formImpresion.controls.factura_hasta.setValue(this.objOrden.factura_hasta),this.isLoading=!1}compareFormulario(){return!(this.objOrden.desde_fecha!==String(this.formImpresion.controls.desde_fecha.value)||this.objOrden.hasta_fecha!==String(this.formImpresion.controls.hasta_fecha.value)||this.objOrden.lugar!==String(this.formImpresion.controls.lugar.value)||this.objOrden.asumido!==String(this.formImpresion.controls.asumido.value)||this.objOrden.incertidumbre!==String(this.formImpresion.controls.incertidumbre.value)||this.objOrden.entrega!==String(this.formImpresion.controls.entrega.value)||this.objOrden.mediante!==String(this.formImpresion.controls.mediante.value)||this.objOrden.pago!==String(this.formImpresion.controls.pago.value)||this.objOrden.pago_hasta!==String(this.formImpresion.controls.pago_hasta.value)||this.objOrden.factura!==String(this.formImpresion.controls.factura.value)||this.objOrden.factura_hasta!==String(this.formImpresion.controls.factura_hasta.value))}actualizarObjOrdenFrx(o){this.objOrden=o,this.goPDF(o)}onClickPDF(o){if(this.formImpresion.valid){this.isLoading=!0,this.typePDF=o;const a={cod_cotizacion:this.objRecepcion.cod_cotizacion,desde_fecha:String(this.formImpresion.controls.desde_fecha.value),hasta_fecha:String(this.formImpresion.controls.hasta_fecha.value),lugar:String(this.formImpresion.controls.lugar.value),asumido:String(this.formImpresion.controls.asumido.value),incertidumbre:String(this.formImpresion.controls.incertidumbre.value),entrega:String(this.formImpresion.controls.entrega.value),mediante:String(this.formImpresion.controls.mediante.value),pago:String(this.formImpresion.controls.pago.value),pago_hasta:String(this.formImpresion.controls.pago_hasta.value),factura:String(this.formImpresion.controls.factura.value),factura_hasta:String(this.formImpresion.controls.factura_hasta.value)};this.ordenPagoIsSaved?this.compareFormulario()?this.goPDF(a):this.actualizarOrdenFrx(a):this.agregarOrdenFrx(a)}}onClickCerrar(){this.response.emit(!1)}onClickAgregarMiLista(){this.isLoading=!0;const o={user_asignado:this.userLogeado.user,fec_ini:(0,_.p6)(new Date,"yyyy-MM-dd","es"),user_mod:this.userLogeado.user};this.actualizarRecepcionFRX(this.objRecepcion.cod_cotizacion,o)}getRecepcion(){this.recepcionFrxService.recepcionFrxGetUno(this.codeRecive).subscribe(o=>{o.boolean?(this.objRecepcion=o.data[0],this.objCotizacionFRX=o.data[0].cotizacion[0],this.getOrdenPago()):(this.customErrorToast(o.message),this.isLoading=!1)})}getOrdenPago(){this.ordenFrxService.ordenFrxGet(this.objRecepcion.cod_cotizacion).subscribe(o=>{o.boolean&&(this.objOrden=o.data[0],this.ordenPagoIsSaved=!0),this.getTecnicoRecepcion()})}getTecnicoRecepcion(){this.usuarioService.usuarioGetUser(this.objRecepcion.user_recepcion).subscribe(o=>{o.boolean?(this.objTecnicoRecepcion=o.data[0],this.getTecnicoAsignado()):(this.customErrorToast(o.message),this.isLoading=!1)})}getTecnicoAsignado(){this.usuarioService.usuarioGetUser(this.objRecepcion.user_asignado).subscribe(o=>{o.boolean?(this.objTecnicoAsignado=o.data[0],this.soloTecnico?this.isLoading=!1:this.getMuestras()):(this.customErrorToast(o.message),this.isLoading=!1)})}getMuestras(){this.muestraFrxService.muestraGet(this.objCotizacionFRX.cod_cotizacion).subscribe(o=>{o.boolean?(this.dataMuestras=o.data,this.getPersona()):(this.customErrorToast(o.message),this.isLoading=!1)})}getPersona(){this.personaService.personaBusquedaID(this.objCotizacionFRX.id_persona).subscribe(o=>{o.boolean?(this.objPersona=o.data[0],this.ordenPagoIsSaved?this.setDataFormImpresion():this.isLoading=!1):(this.customErrorToast(o.message),this.isLoading=!1)})}actualizarRecepcionFRX(o,a){this.isLoading=!0,this.recepcionFrxService.recepcionFrxActualizar(o,a).subscribe(p=>{p.boolean?(this.objRecepcion.user_asignado=a.user_asignado,this.objRecepcion.fec_ini=a.fec_ini,this.objRecepcion.user_mod=a.user_mod,this.getTecnicoAsignado()):(this.customErrorToast(p.message),this.isLoading=!1)})}agregarOrdenFrx(o){this.ordenFrxService.ordenFrxRegistro(o).subscribe(a=>{a.boolean?(this.ordenPagoIsSaved=!0,this.actualizarObjOrdenFrx(o)):(this.customErrorToast(a.message),this.isLoading=!1)})}actualizarOrdenFrx(o){this.ordenFrxService.ordenFrxActualizar(this.objRecepcion.cod_cotizacion,o).subscribe(a=>{a.boolean?this.actualizarObjOrdenFrx(o):(this.customErrorToast(a.message),this.isLoading=!1)})}goPDF(o){let a=[];for(let f=0;f<this.dataMuestras.length;f++){const h=this.dataMuestras[f].muestra_parametros;for(let I=0;I<h.length;I++){const g=h[I].parametro;if(a.length>0){let F=!1;for(let b=0;b<a.length;b++)if(a[b].id===g.id_parametro){a[b].cantidad=a[b].cantidad+1,F=!0;break}F||a.push({id:g.id_parametro,parametro:g.nombre,precio:g.costo_directo,cantidad:1})}else a.push({id:g.id_parametro,parametro:g.nombre,precio:g.costo_directo,cantidad:1})}}let p=[];p.push([{text:"Nro",style:"titletable"},{text:"DESCRIPCI\xd3N DEL SERVICIO",style:"titletable"},{text:"CANTIDAD",style:"titletable"},{text:"COSTO\nUNITARIO BS.",style:"titletable"},{text:"COSTO\nTOTAL BS.",style:"titletable"}]);for(let f=0;f<a.length;f++){const h=a[f];p.push([{text:f+1,style:"texttable"},{text:h.parametro,style:"texttable"},{text:h.cantidad,style:"texttable"},{text:"Bs. "+h.precio,style:"texttable"},{text:"Bs. "+h.precio*h.cantidad,style:"texttable"}])}this.isLoading=!1,function S(r,d,o,a,p,f){let h="",I="",g="",F="";if(0===a.id_empresa)h=a.razon;else{const c=a.id_empresa;h=c.razon_social,I=c.direccion,g=c.ciudad,F=c.telefono}var b={pageSize:"Letter",info:{title:"INGENIALAB "+o.cod_cotizacion,author:"INGENIALAB",subject:"INGENIALAB FRX ",keywords:"FRX"},content:[{text:"ORDEN DE SERVICIO",style:"header"},{text:"\n\n"},{columns:[{table:{widths:["auto","auto","*"],body:[[{border:[!1],text:"Fecha Recepci\xf3n",style:"title"},{border:[!1],text:":",style:"title"},{border:[!1],text:T(d.fec_recepcion),style:"text"}]]}},{table:{widths:["auto","auto","*"],body:[[{border:[!1],text:"C\xf3digo CTZ",style:"title"},{border:[!1],text:":",style:"title"},{border:[!1],text:o.cod_cotizacion,style:"text"}]]}}]},{text:"\n"},{table:{widths:[100,"*",70,"*"],borders:[!1],layout:"noBorders",body:[[{columns:[{text:"CLIENTE",style:"title",width:"*"},{text:":",style:"title",alignment:"right",width:"*"}],margin:[0,0,0,2]},{border:[!1,!1,!1,!0],text:h,style:"text",colSpan:3},{},{}],[{columns:[{text:"DIRECCI\xd3N",style:"title",width:"*"},{text:":",style:"title",alignment:"right",width:"auto"}],margin:[0,0,0,2]},{border:[!1,!1,!1,!0],text:I,style:"text"},{columns:[{text:"CIUDAD",style:"title",width:"*"},{text:":",style:"title",alignment:"right",width:"auto"}]},{border:[!1,!1,!1,!0],text:g,style:"text"}],[{columns:[{text:"CONTACTO",style:"title",width:"*"},{text:":",style:"title",alignment:"right",width:"auto"}],margin:[0,0,0,2]},{border:[!1,!1,!1,!0],text:a.nombre_persona,style:"text"},{columns:[{text:"CELULAR",style:"title",width:"*"},{text:":",style:"title",alignment:"right",width:"auto"}]},{border:[!1,!1,!1,!0],text:a.celular,style:"text"}],[{columns:[{text:"CORREO ELECT.",style:"title",width:"*"},{text:":",style:"title",alignment:"right",width:"auto"}],margin:[0,0,0,2]},{border:[!1,!1,!1,!0],text:a.email,style:"text"},{columns:[{text:"TEL\xc9FONO",style:"title",width:"*"},{text:":",style:"title",alignment:"right",width:"auto"}]},{border:[!1,!1,!1,!0],text:F,style:"text"}]]},layout:{defaultBorder:!1,hLineWidth:function(c,m){return.1},vLineWidth:function(c,m){return.1},hLineColor:function(c,m){return l},vLineColor:function(c,m){return l}}},{text:"DETALLE",alignment:"center",style:"title",margin:[0,10,0,10]},{table:{fontSize:8,margin:[0,0,0,0],widths:["auto","auto","auto","*","auto"],body:p},layout:{defaultBorder:!0,hLineWidth:function(c,m){return.1},vLineWidth:function(c,m){return.1},hLineColor:function(c,m){return l},vLineColor:function(c,m){return l}}},{columns:[{margin:[0,0,0,10],text:[{text:""}]},{margin:[0,15,0,0],width:"auto",table:{widths:["auto","auto","*"],body:[[{borderColor:l,border:[!0,!0,!1,!0],margin:[7,2,7,2],alignment:"left",bold:!0,text:"Total a Pagar"},{borderColor:l,border:[!1,!0,!1,!0],margin:[7,2,7,2],alignment:"left",bold:!0,text:":"},{borderColor:l,border:[!1,!0,!0,!0],margin:[7,2,7,2],alignment:"right",text:"Bs. "+o.total_pagar}],[{borderColor:l,border:[!0,!0,!1,!0],margin:[7,2,7,2],alignment:"left",bold:!0,text:"Descuento"},{borderColor:l,border:[!1,!0,!1,!0],margin:[7,2,7,2],alignment:"left",bold:!0,text:":"},{borderColor:l,border:[!1,!0,!0,!0],margin:[7,2,7,2],alignment:"right",text:"Bs. "+o.descuento}],[{borderColor:l,border:[!0,!0,!1,!0],margin:[7,2,7,2],alignment:"left",bold:!0,text:"Costo Total"},{borderColor:l,border:[!1,!0,!1,!0],margin:[7,2,7,2],alignment:"left",bold:!0,text:":"},{borderColor:l,border:[!1,!0,!0,!0],margin:[7,2,7,2],alignment:"right",text:"Bs. "+o.costo_total}]]},layout:{defaultBorder:!0,hLineWidth:function(c,m){return.1},vLineWidth:function(c,m){return.1},hLineColor:function(c,m){return l},vLineColor:function(c,m){return l}},color:l,fontSize:10}],margin:[0,0,0,0]}],footer:(c,m)=>c===m?{margin:[40,-270,40,0],stack:[{columns:[[{text:[{text:"El servicio se realizar\xe1 desde fecha: "},{text:T(f.desde_fecha),bold:!0},{text:" hasta fecha: "},{text:T(f.hasta_fecha),bold:!0}],fontSize:8,margin:[0,0,0,5]},{text:[{text:"Lugar del servicio: "},{text:f.lugar+". ",bold:!0},{text:"Gastos logisticos asumidos por: "},{text:f.asumido,bold:!0}],fontSize:8,margin:[0,0,0,5]},{text:"La empresa contratante se hace cargo del traslado, estadia y alimentacion de los t\xe9cnicos en caso de mediciones in situ.",alignment:"center",italics:!0,bold:!0,characterSpacing:.5,fontSize:9,margin:[0,5,0,10]},{text:[{text:"REQUISITOS MINIMOS MUESTRA(S) DE ENSAYO.\n",characterSpacing:.5,fontSize:9,bold:!0},{text:"Analisis mediante FRX,  muestra(s) mayor a 1 g en caso de viruta y/o grosor mayor a 0,5 mm para laminas.\n"},{text:"El cliente requiere el reporte de incertidumbre:"},{text:f.incertidumbre,bold:!0}],fontSize:8,margin:[0,0,0,5]},{text:[{text:"ENTREGA INFORME DE RESULTADOS.\n",characterSpacing:.5,fontSize:9,bold:!0},{text:"Hasta fecha "},{text:T(f.entrega),bold:!0},{text:" mediante "},{text:f.mediante+".",bold:!0}],fontSize:8,margin:[0,0,0,5]},{text:[{text:"EL PAGO ",bold:!0},{text:"por el servicio se realizar\xe1 "},{text:f.pago,bold:!0},{text:" hasta fecha "},{text:T(f.pago_hasta)+".",bold:!0}],fontSize:8,margin:[0,0,0,5]},{text:[{text:"LA FACTURA ",bold:!0},{text:"por el servicio se emitira "},{text:f.factura,bold:!0},{text:" hasta fecha "},{text:T(f.factura_hasta)+".",bold:!0}],fontSize:8,margin:[0,0,0,5]},{text:[{text:"INGENIALAB ",bold:!0},{text:"garantiza la capacidad y los recursos para cumplir los requisitos establecidos en las fechas definidas. La informacion generada durante el servicio sera de uso exclusivo del cliente y no podra ser utilizada para otros fines, salvo excepcion de aprobacion previa propia del cliente o requerimientos legales. "}],fontSize:8,margin:[0,0,0,5]},{text:[{text:"El solicitante y la empresa "},{text:"CONFIRMAN LA REALIZACION DEL SERVICIO ",bold:!0},{text:"aceptando los terminos y condiciones descritas. El incumplimiento del presente acuerdo da el derecho de iniciar cualquier acci\xf3n legal en el \xe1mbito civil, penal y/o administrativo."}],fontSize:8}]]},{text:"\n\n"},{columns:[[{text:[{text:"___________________________________________________\n",margin:[0,0,0,5]},{text:"INGENIALAB SRL",characterSpacing:.5}],alignment:"center",bold:!0,fontSize:10},{text:"\n"},{table:{widths:["auto","auto","*"],body:[[{borderColor:l,border:[!1],alignment:"left",bold:!0,text:"Nombre"},{borderColor:l,border:[!1],alignment:"left",bold:!0,text:":"},{borderColor:l,border:[!1],alignment:"left",text:"____________________________"}],[{borderColor:l,border:[!1],alignment:"left",bold:!0,text:"Cargo"},{borderColor:l,border:[!1],alignment:"left",bold:!0,text:":"},{borderColor:l,border:[!1],alignment:"left",text:"____________________________"}]]},color:l,fontSize:10}],[{text:[{text:"___________________________________________________\n",margin:[0,0,0,5]},{text:"SOLICITANTE",characterSpacing:.5}],alignment:"center",bold:!0,fontSize:10},{text:"\n"},{table:{widths:["auto","auto","*"],body:[[{borderColor:l,border:[!1],alignment:"left",bold:!0,text:"Nombre"},{borderColor:l,border:[!1],alignment:"left",bold:!0,text:":"},{borderColor:l,border:[!1],alignment:"left",text:"____________________________"}],[{borderColor:l,border:[!1],alignment:"left",bold:!0,text:"Cargo"},{borderColor:l,border:[!1],alignment:"left",bold:!0,text:":"},{borderColor:l,border:[!1],alignment:"left",text:"____________________________"}]]},color:l,fontSize:10}]]},{text:`P\xe1gina ${c} de ${m}`,alignment:"center",margin:[0,10,0,20],fontSize:8}]}:{margin:[40,0,40,20],columns:[{text:`P\xe1gina ${c} de ${m}`,alignment:"center"}]},pageMargins:[40,60],styles:{header:{width:"100",characterSpacing:1,fontSize:12,bold:!0,alignment:"center",color:l},title:{characterSpacing:.5,fontSize:10,bold:!0,color:l},titletable:{characterSpacing:.5,fontSize:10,bold:!0,alignment:"center",color:l},texttable:{characterSpacing:.5,fontSize:10,alignment:"center",color:l},text:{characterSpacing:.5,fontSize:10,color:l}}};switch(r){case"descargar":t.createPdf(b).download(o.cod_cotizacion+".pdf");break;case"imprimir":t.createPdf(b).open()}}(this.typePDF,this.objRecepcion,this.objCotizacionFRX,this.objPersona,p,o)}customSuccessToast(o){this.toast.success(o,{duration:2e3,style:{border:"1px solid #2e798c",padding:"16px",color:"#2b6273"},iconTheme:{primary:"#3494a6",secondary:"#FFFAEE"}})}customErrorToast(o){this.toast.error(o,{duration:2e3,style:{border:"1px solid #ef445f",padding:"16px",color:"#ef445f"},iconTheme:{primary:"#ef445f",secondary:"#FFFAEE"}})}customLoadingToast(o){this.toast.loading(o,{duration:1e4,style:{border:"1px solid #2b59c3",padding:"16px",color:"#2b59c3"},iconTheme:{primary:"#2b59c3",secondary:"#FFFAEE"}})}static#e=this.\u0275fac=function(a){return new(a||r)(e.Y36(E.F0),e.Y36(w.jE),e.Y36(z.J),e.Y36(N),e.Y36(J.i),e.Y36(j.P),e.Y36(M.y),e.Y36(U.J))};static#t=this.\u0275cmp=e.Xpm({type:r,selectors:[["app-recepcion-frx"]],inputs:{typeRecive:"typeRecive",codeRecive:"codeRecive"},outputs:{response:"response"},decls:3,vars:2,consts:[[1,"relative","w-full","h-full"],[4,"ngIf"],["class","flex flex-col gap-4 w-full h-max overflow-auto p-4",4,"ngIf"],[1,"flex","flex-col","gap-4","w-full","h-max","overflow-auto","p-4"],[1,"w-full","text-center",3,"id","label"],[1,"flex","flex-col","border","border-dashed","border-color-text","rounded-lg","w-full","h-max","p-2"],[1,"flex","w-full","mb-2"],[3,"id","label"],[1,"flex","gap-4","flex-wrap"],[3,"id","label","text"],["class","flex flex-col border border-dashed border-color-text rounded-lg w-full h-max p-2",4,"ngIf"],[1,"flex","w-full"],[1,"w-full","text-center","mt-2",3,"id","label"],[1,"flex","flex-col","gap-4","w-full","h-max"],[1,"flex","gap-4","w-full"],[1,"w-full",3,"id","label","type","autocomplete","control","icon"],[1,"w-full",3,"id","label","control","data"],[3,"id","label","type","icon","valid","click"],[3,"id","label","type","icon","class","valid","click",4,"ngIf"]],template:function(a,p){1&a&&(e.TgZ(0,"div",0),e.YNc(1,Y,1,0,"app-custom-loading",1),e.YNc(2,x,60,154,"div",2),e.qZA()),2&a&&(e.xp6(1),e.Q6J("ngIf",p.isLoading),e.xp6(1),e.Q6J("ngIf",!p.isLoading))},dependencies:[_.O5,Q.x,q.E,D.O,B.y,G.m,k._,X.M,u._Y,u.JL]})}return r})()}}]);