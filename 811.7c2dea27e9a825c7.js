"use strict";(self.webpackChunkapp_ingelab=self.webpackChunkapp_ingelab||[]).push([[811],{9811:(Z,T,c)=>{c.r(T),c.d(T,{GastosModule:()=>Ot});var l=c(6814),p=c(2232),i=c(95),A=c(3995),x=c(2095),h=c(5528),g=c(2999),t=c(4946),C=c(7459),y=c(9862);let f=(()=>{class s{constructor(e){this.http=e,this.urlBase=C.a,this.urlVersion="/v1",this.urlModule="/gasto"}gastoRegistro(e){return this.http.post(this.urlBase+this.urlVersion+this.urlModule,e)}gastoGetLista(){return this.http.get(this.urlBase+this.urlVersion+this.urlModule)}gastoGet(e){return this.http.get(this.urlBase+this.urlVersion+this.urlModule+"/"+e)}gastoGetBusqueda(e,a){return this.http.get(this.urlBase+this.urlVersion+this.urlModule+"/busqueda/"+e+"/"+a)}gastoActualizar(e,a){return this.http.patch(this.urlBase+this.urlVersion+this.urlModule+"/"+e,a)}gastoDelete(e,a){return this.http.patch(this.urlBase+this.urlVersion+this.urlModule+"/"+e,a)}findLastCode(e){return this.http.get(this.urlBase+this.urlVersion+this.urlModule+"/last-code/"+e)}static#t=this.\u0275fac=function(a){return new(a||s)(t.LFG(y.eN))};static#e=this.\u0275prov=t.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"})}return s})();var _=c(4698),b=c(9924),G=c(3325),q=c(2526),O=c(9564),I=c(8613),D=c(7069),F=c(6236);function E(s){return""===s?"":(0,l.p6)(s,"dd-MM-yyyy","es")}function B(s){let r="";switch(s){case"LAB":r="LABORATORIO";break;case"ADM":r="ADMINISTRACI\xd3N"}return r}D.vfs=F.I.vfs;const d="#000000",k="#15a08c",w="#1571a0",v="#ffffff",L="#fff432";function J(s){let r=[];r.push([{text:"NRO",alignment:"center",bold:!0,margin:[0,9,0,9],color:v,fillColor:w},{text:"DESCRIPCI\xd3N",alignment:"center",bold:!0,margin:[0,9,0,9],color:v,fillColor:w},{text:"CANTIDAD",alignment:"center",bold:!0,margin:[0,9,0,9],color:v,fillColor:w},{text:"UNIDAD DE\nMEDIDA",alignment:"center",bold:!0,margin:[0,2,0,0],color:v,fillColor:w},{text:"PRECIO\nUNITARIO",alignment:"center",bold:!0,margin:[0,2,0,0],color:v,fillColor:w},{text:"TOTAL COMPRAS",alignment:"center",bold:!0,margin:[0,9,0,9],color:v,fillColor:w}]);const e=s.detalle;for(let a=0;a<e.length;a++){const o=e[a];r.push([{text:a+1,alignment:"center"},{text:o.descripcion,alignment:"left"},{text:o.cantidad,alignment:"center"},{text:o.unidad_medida,alignment:"center"},{text:o.precio_unidad,alignment:"center"},{text:o.precio_total,alignment:"right"}])}return r.push([{text:"",border:[!1]},{text:"",border:[!1]},{text:"SUBTOTAL COMPRAS BS.",alignment:"left",bold:!0,colSpan:3},{},{},{text:"BS. "+s.sub_total,alignment:"right",bold:!0}],[{text:"",border:[!1]},{text:"",border:[!1]},{text:"DESCUENTO BS.",alignment:"left",bold:!0,colSpan:3},{},{},{text:"BS. "+s.descuento,alignment:"right",bold:!0}],[{text:"",border:[!1]},{text:"",border:[!1]},{text:"TOTAL COMPRAS BS.",alignment:"left",bold:!0,colSpan:3,fillColor:L},{},{},{text:"Bs. "+s.total_bs,alignment:"right",bold:!0,fillColor:L}],[{text:"",border:[!1]},{text:"",border:[!1]},{text:"TOTAL COMPRAS USD.",alignment:"left",bold:!0,colSpan:3},{},{},{text:"USD. "+s.total_sus,alignment:"right",bold:!0}]),r.push([{text:" ",border:[!1]},{text:"",border:[!1]},{text:"",border:[!1]},{text:"",border:[!1]},{text:"",border:[!1]},{text:"",border:[!1]}]),r}var M=c(6595);let P=(()=>{class s{constructor(e){this.http=e,this.urlBase=C.a,this.urlVersion="/v1",this.urlModule="/gasto-detalle"}gastoDetalleAdd(e){return this.http.post(this.urlBase+this.urlVersion+this.urlModule,e)}gastoDetalleGet(e){return this.http.get(this.urlBase+this.urlVersion+this.urlModule+"/"+e)}static#t=this.\u0275fac=function(a){return new(a||s)(t.LFG(y.eN))};static#e=this.\u0275prov=t.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"})}return s})();var S=c(1063),U=c(5592);let Q=(()=>{class s{constructor(e){this.http=e}getImageBase64(e){return new U.y(a=>{this.http.get(e,{responseType:"blob"}).subscribe(o=>{const n=new FileReader;n.onloadend=()=>{a.next(n.result),a.complete()},n.readAsDataURL(o)},o=>{a.error(o)})})}static#t=this.\u0275fac=function(a){return new(a||s)(t.LFG(y.eN))};static#e=this.\u0275prov=t.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"})}return s})();var V=c(7661),Y=c(1897);function j(s,r){1&s&&t._UZ(0,"app-custom-loading")}function K(s,r){if(1&s&&(t.TgZ(0,"th",14),t._uU(1),t.qZA()),2&s){const e=r.$implicit;t.xp6(1),t.hij(" ",e," ")}}function z(s,r){if(1&s){const e=t.EpF();t.TgZ(0,"tr",15),t.NdJ("click",function(){const n=t.CHM(e).index,u=t.oxw(2);return t.KtG(u.onClickItem(n))}),t.TgZ(1,"th",16),t._uU(2),t.qZA(),t.TgZ(3,"td",17),t._uU(4),t.qZA(),t.TgZ(5,"td",17),t._uU(6),t.qZA(),t.TgZ(7,"td",17),t._uU(8),t.qZA(),t.TgZ(9,"td",17),t._uU(10),t.qZA(),t.TgZ(11,"td",17),t._uU(12),t.qZA(),t.TgZ(13,"td",17),t._uU(14),t.qZA()()}if(2&s){const e=r.$implicit,a=r.index;t.xp6(2),t.Oqu(a+1),t.xp6(2),t.Oqu(e.razon),t.xp6(2),t.Oqu(e.nit),t.xp6(2),t.Oqu(e.banco),t.xp6(2),t.Oqu(e.nro_cuenta),t.xp6(2),t.Oqu(e.beneficiario),t.xp6(2),t.Oqu(e.moneda)}}function W(s,r){if(1&s){const e=t.EpF();t.TgZ(0,"div",4)(1,"div",5),t._UZ(2,"app-custom-drop-box",6)(3,"app-custom-input",7),t.TgZ(4,"app-custom-button",8),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.onClickBuscar())}),t.qZA()(),t.TgZ(5,"div",9)(6,"table",10)(7,"thead",11)(8,"tr"),t.YNc(9,K,2,1,"th",12),t.qZA()(),t.TgZ(10,"tbody"),t.YNc(11,z,15,7,"tr",13),t.qZA()()(),t.TgZ(12,"app-custom-button",8),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.onClickCancel())}),t.qZA()()}if(2&s){const e=t.oxw();t.xp6(2),t.Tol("w-max"),t.Q6J("id","id_drop_box_busqueda")("label","B\xfasqueda...")("control",e.formBusqueda.controls.busqueda)("data",e.dataBusqueda),t.xp6(1),t.Tol(""),t.Q6J("id","id_input_value")("label","B\xfasqueda")("type","text")("autocomplete","")("control",e.formBusqueda.controls.value)("icon",""),t.xp6(1),t.Tol("w-32"),t.Q6J("id","id_btn_busqueda")("label","Buscar")("type","accept")("icon","")("valid",e.formBusqueda.valid),t.xp6(5),t.Q6J("ngForOf",e.tableHead),t.xp6(2),t.Q6J("ngForOf",e.dataResult),t.xp6(1),t.Tol("w-32"),t.Q6J("id","id_btn_busqueda")("label","Cancelar")("type","cancel")("icon","")("valid",!0)}}let H=(()=>{class s{constructor(e,a,o){this.router=e,this.toast=a,this.proovedorService=o,this.response=new t.vpe,this.dataBusqueda=x.zf,this.isLoading=!1,this.tableHead=["#","Raz\xf3n Social","NIT","Banco","Nro. Cuenta","Beneficiario","Moneda"],this.formBusqueda=new i.cw({busqueda:new i.NI("",[i.kI.required]),value:new i.NI("",[i.kI.required])})}ngOnInit(){(0,A.wQ)()}onClickBuscar(){if(this.formBusqueda.valid){this.isLoading=!0;const e=String(this.formBusqueda.controls.busqueda.value),a=String(this.formBusqueda.controls.value.value);this.proovedorService.proovedorGetBy(e,a).subscribe(o=>{o.boolean?(this.dataResult=o.data,this.customSuccessToast(o.message)):(this.dataResult=[],this.customErrorToast(o.message)),this.isLoading=!1})}}onClickItem(e){this.response.emit(this.dataResult[e])}onClickCancel(){this.response.emit(null)}customSuccessToast(e){this.toast.success(e,{duration:2e3,style:{border:"1px solid #2e798c",padding:"16px",color:"#2b6273"},iconTheme:{primary:"#3494a6",secondary:"#FFFAEE"}})}customErrorToast(e){this.toast.error(e,{duration:2e3,style:{border:"1px solid #ef445f",padding:"16px",color:"#ef445f"},iconTheme:{primary:"#ef445f",secondary:"#FFFAEE"}})}customLoadingToast(e){this.toast.loading(e,{duration:1e4,style:{border:"1px solid #2b59c3",padding:"16px",color:"#2b59c3"},iconTheme:{primary:"#2b59c3",secondary:"#FFFAEE"}})}static#t=this.\u0275fac=function(a){return new(a||s)(t.Y36(p.F0),t.Y36(_.jE),t.Y36(S.k))};static#e=this.\u0275cmp=t.Xpm({type:s,selectors:[["app-custom-alert-search-proveedor"]],outputs:{response:"response"},decls:4,vars:2,consts:[[1,"flex","justify-center","items-center","w-full","h-full","bg-gray-400","bg-opacity-60","p-4"],[1,"bg-white","rounded-lg","w-full","md:w-max","h-full","md:h-max"],[4,"ngIf"],["class","h-full flex flex-col gap-4 p-4 text-center",4,"ngIf"],[1,"h-full","flex","flex-col","gap-4","p-4","text-center"],[1,"flex","flex-col","md:flex-row","w-full","gap-4","items-center"],[3,"id","label","control","data"],[1,"flex-grow",3,"id","label","type","autocomplete","control","icon"],[3,"id","label","type","icon","valid","click"],[1,"w-full","h-full","relative","overflow-auto"],[1,"w-full","text-sm","text-left","rtl:text-right","text-gray-500","dark:text-gray-400"],[1,"text-xs","text-gray-700","uppercase","bg-gray-50","dark:bg-gray-700","dark:text-gray-400"],["scope","col","class","px-6 py-3",4,"ngFor","ngForOf"],["class","bg-white border-b dark:bg-gray-800 dark:border-gray-700 cursor-pointer hover:bg-primary-100",3,"click",4,"ngFor","ngForOf"],["scope","col",1,"px-6","py-3"],[1,"bg-white","border-b","dark:bg-gray-800","dark:border-gray-700","cursor-pointer","hover:bg-primary-100",3,"click"],["scope","row",1,"px-6","py-4","font-medium","text-gray-900","whitespace-nowrap","dark:text-white"],[1,"px-6","py-4"]],template:function(a,o){1&a&&(t.TgZ(0,"div",0)(1,"div",1),t.YNc(2,j,1,0,"app-custom-loading",2),t.YNc(3,W,13,30,"div",3),t.qZA()()),2&a&&(t.xp6(2),t.Q6J("ngIf",o.isLoading),t.xp6(1),t.Q6J("ngIf",!o.isLoading))},dependencies:[l.sg,l.O5,b.x,G.E,O.O,I.m]})}return s})();function $(s,r){if(1&s&&(t.TgZ(0,"span",5),t._UZ(1,"i"),t.qZA()),2&s){const e=t.oxw();t.Tol(e.classIcon),t.xp6(1),t.Tol(e.icon)}}const X=function(s){return{"text-color-text":s}};let tt=(()=>{class s{constructor(){this.classDiv="border-color-border-unfocus ",this.classIcon="text-color-icon-unfocus",this.classInput="text-color-icon-unfocus",this.classLabel="border-color-border-unfocus text-color-text-unfocus",this.isHidden=!0,this.inputText="",this.inputFocus=!1}ngOnInit(){}static#t=this.\u0275fac=function(a){return new(a||s)};static#e=this.\u0275cmp=t.Xpm({type:s,selectors:[["app-custom-input2"]],inputs:{id:"id",label:"label",text:"text",class:"class",icon:"icon"},decls:7,vars:14,consts:[[1,"flex","items-center","gap-2","py-2","px-3","w-full","rounded-lg","border-2"],["class","p-1",3,"class",4,"ngIf"],[1,"relative","w-full"],["type","text","disabled","","placeholder","",1,"pt-2","px-0","pb-0","text-base","w-full","bg-transparent","border-0","appearance-none","focus:outline-none","focus:ring-0","peer",3,"id","ngModel","ngModelChange"],[1,"absolute","text-sm","text-color-text-unfocus","duration-300","transform","-translate-y-4","scale-75","top-2","z-10","origin-[0]","bg-transparent","peer-focus:text-color-text","peer-placeholder-shown:scale-100","peer-placeholder-shown:-translate-y-1/2","peer-placeholder-shown:top-1/2","peer-focus:top-2","peer-focus:scale-75","peer-focus:-translate-y-4","rtl:peer-focus:translate-x-1/4","rtl:peer-focus:left-auto","start-1",3,"for","ngClass"],[1,"p-1"]],template:function(a,o){1&a&&(t.TgZ(0,"div")(1,"div",0),t.YNc(2,$,2,4,"span",1),t.TgZ(3,"div",2)(4,"input",3),t.NdJ("ngModelChange",function(u){return o.text=u}),t.qZA(),t.TgZ(5,"label",4),t._uU(6),t.qZA()()()()),2&a&&(t.Tol(o.class),t.xp6(1),t.Tol(o.classDiv),t.xp6(1),t.Q6J("ngIf",""!=o.icon),t.xp6(2),t.Tol(o.classInput),t.Q6J("id",o.id)("ngModel",o.text),t.xp6(1),t.Q6J("for",o.id)("ngClass",t.VKq(12,X,!o.inputFocus)),t.xp6(1),t.Oqu(o.label))},dependencies:[l.mk,l.O5,i.Fj,i.JJ,i.On]})}return s})();var et=c(2010),ot=c(7614),st=c(8343);function at(s,r){if(1&s){const e=t.EpF();t.TgZ(0,"app-custom-alert-input",6),t.NdJ("onResponse",function(o){t.CHM(e);const n=t.oxw();return t.KtG(n.inputDescuentoResponse(o))}),t.qZA()}2&s&&(t.Tol(""),t.Q6J("id","id_input_number")("title","Descuento")("label","Descuento Bs.")("type","number")("icon",""))}function rt(s,r){if(1&s){const e=t.EpF();t.TgZ(0,"app-custom-alert-search-proveedor",7),t.NdJ("response",function(o){t.CHM(e);const n=t.oxw();return t.KtG(n.busquedaProveedorResponse(o))}),t.qZA()}}function it(s,r){if(1&s){const e=t.EpF();t.TgZ(0,"app-custom-alert-date-picker",8),t.NdJ("response",function(o){t.CHM(e);const n=t.oxw();return t.KtG(n.fechaSelectResponse(o))}),t.qZA()}if(2&s){const e=t.oxw();t.Q6J("label",e.labelDatePicker)("fecha",e.fechaSendDatePicker)("type",e.typeDatePicker)}}function nt(s,r){1&s&&t._UZ(0,"app-custom-loading")}function lt(s,r){if(1&s){const e=t.EpF();t.TgZ(0,"app-custom-icon",36),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.onClickBusquedaProveedor())}),t.qZA()}2&s&&(t.Tol("h-full text-color-icon-2 hover:bg-primary-100 rounded"),t.Q6J("icon","fa-solid fa-magnifying-glass fa-lg cursor-pointer"))}function ct(s,r){if(1&s){const e=t.EpF();t.TgZ(0,"p",43),t.NdJ("click",function(){t.CHM(e);const o=t.oxw().index,n=t.oxw(2);return t.KtG(n.onClickEliminarItem(o))}),t._uU(1," Eliminar "),t.qZA()}}function ut(s,r){if(1&s&&(t.ynx(0),t.TgZ(1,"tr",37)(2,"th",38),t._uU(3),t.qZA(),t.TgZ(4,"th",39),t._uU(5),t.qZA(),t.TgZ(6,"td",40),t._uU(7),t.qZA(),t.TgZ(8,"td",41),t._uU(9),t.qZA(),t.TgZ(10,"td",41),t._uU(11),t.qZA(),t.TgZ(12,"td",41),t._uU(13),t.qZA(),t.TgZ(14,"td",41),t.YNc(15,ct,2,0,"p",42),t.qZA()(),t.BQk()),2&s){const e=r.$implicit,a=r.index,o=t.oxw(2);t.xp6(3),t.Oqu(a+1),t.xp6(2),t.Oqu(e.descripcion),t.xp6(2),t.Oqu(e.cantidad),t.xp6(2),t.Oqu(e.unidad_medida),t.xp6(2),t.Oqu(e.precio_unidad),t.xp6(2),t.Oqu(e.precio_total),t.xp6(2),t.Q6J("ngIf","ver"!=o.typeRecive)}}function dt(s,r){if(1&s){const e=t.EpF();t.TgZ(0,"tr"),t._UZ(1,"th",38),t.TgZ(2,"th",39),t._UZ(3,"app-custom-input",17),t.qZA(),t.TgZ(4,"td",40)(5,"app-custom-input",44),t.NdJ("input",function(o){t.CHM(e);const n=t.oxw(2);return t.KtG(n.onChange(o))}),t.qZA()(),t.TgZ(6,"td",41),t._UZ(7,"app-custom-drop-box",45),t.qZA(),t.TgZ(8,"td",41)(9,"app-custom-input",44),t.NdJ("input",function(o){t.CHM(e);const n=t.oxw(2);return t.KtG(n.onChange(o))}),t.qZA()(),t.TgZ(10,"td",41),t._UZ(11,"app-custom-input",17),t.qZA(),t.TgZ(12,"td",41)(13,"app-custom-button",35),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.onClickAddDetalle())}),t.qZA()()()}if(2&s){const e=t.oxw(2);t.xp6(3),t.Tol(""),t.Q6J("id","id_add_descripcion")("label","Descripci\xf3n")("type","text")("autocomplete","")("control",e.formAddDetalle.controls.descripcion)("icon",""),t.xp6(2),t.Tol(""),t.Q6J("id","id_add_cantidad")("label","Cantidad")("type","number")("autocomplete","")("control",e.formAddDetalle.controls.cantidad)("icon",""),t.xp6(2),t.Tol(""),t.Q6J("id","id_drop_box_tipo_medida")("label","Unidad de medida...")("control",e.formAddDetalle.controls.unidad_medida)("data",e.dataUnidadMedida),t.xp6(2),t.Tol(""),t.Q6J("id","id_add_precio")("label","Precio Unitario")("type","number")("autocomplete","")("control",e.formAddDetalle.controls.precio_unidad)("icon",""),t.xp6(2),t.Tol(""),t.Q6J("id","id_add_total_compras")("label","Total Compras")("type","number")("autocomplete","")("control",e.formAddDetalle.controls.precio_total)("icon",""),t.xp6(2),t.Tol(""),t.Q6J("id","id_btn_add_detalle")("label","Agregar")("type","cancel")("icon","")("valid",e.formAddDetalle.valid)}}function pt(s,r){if(1&s){const e=t.EpF();t.TgZ(0,"app-custom-button",35),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.onClickAgregarGasto())}),t.qZA()}if(2&s){const e=t.oxw(2);t.Tol(""),t.Q6J("id","id_btn_guardar")("label","Guardar")("type","accept")("icon","")("valid",e.formGasto.valid)}}function mt(s,r){if(1&s){const e=t.EpF();t.TgZ(0,"app-custom-button",35),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.onClickPDF("imprimir"))}),t.qZA()}2&s&&(t.Tol(""),t.Q6J("id","id_btn_imprimir")("label","Imprimir")("type","accept")("icon","")("valid",!0))}function gt(s,r){if(1&s){const e=t.EpF();t.TgZ(0,"app-custom-button",35),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.onClickPDF("descargar"))}),t.qZA()}2&s&&(t.Tol(""),t.Q6J("id","id_btn_imprimir")("label","Descargar")("type","accept")("icon","")("valid",!0))}const _t=function(s){return{"cursor-pointer":s}};function ft(s,r){if(1&s){const e=t.EpF();t.TgZ(0,"form",9),t._UZ(1,"app-custom-title",10),t.TgZ(2,"div",11),t._UZ(3,"app-custom-input",12)(4,"app-custom-input",12)(5,"app-custom-input",12)(6,"app-custom-input",12),t.qZA(),t.TgZ(7,"div",11)(8,"app-custom-drop-box",13),t.NdJ("change",function(o){t.CHM(e);const n=t.oxw();return t.KtG(n.onChangeArea(o))}),t.qZA(),t.TgZ(9,"div",14),t._UZ(10,"app-custom-input2",15)(11,"app-custom-input2",15),t.YNc(12,lt,1,3,"app-custom-icon",16),t.qZA(),t._UZ(13,"app-custom-input",17),t.qZA(),t.TgZ(14,"div",11),t._UZ(15,"app-custom-input",17)(16,"app-custom-drop-box",18)(17,"app-custom-input",17)(18,"app-custom-input",17)(19,"app-custom-input",17),t.qZA(),t.TgZ(20,"div",19)(21,"div",20),t._UZ(22,"app-custom-sub-title",21),t.qZA(),t.TgZ(23,"div",22)(24,"table",23)(25,"thead",24)(26,"tr")(27,"th",25),t._uU(28,"#"),t.qZA(),t.TgZ(29,"th",26),t._uU(30,"Descripci\xf3n"),t.qZA(),t.TgZ(31,"th",26),t._uU(32,"Cantidad"),t.qZA(),t.TgZ(33,"th",27),t._uU(34,"Unidad de Medida"),t.qZA(),t.TgZ(35,"th",27),t._uU(36,"Precio Unitario"),t.qZA(),t.TgZ(37,"th",27),t._uU(38,"Total Compras"),t.qZA(),t._UZ(39,"th",27),t.qZA()(),t.TgZ(40,"tbody"),t.YNc(41,ut,16,7,"ng-container",28),t.YNc(42,dt,14,45,"tr",4),t.qZA()()()(),t.TgZ(43,"div",29)(44,"div",30),t._UZ(45,"app-custom-label0",31),t.ALo(46,"currency"),t.TgZ(47,"app-custom-label0",32),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.onClickDescuento())}),t.ALo(48,"currency"),t.qZA(),t._UZ(49,"app-custom-label0",31),t.ALo(50,"currency"),t._UZ(51,"app-custom-label0",31),t.ALo(52,"currency"),t.qZA()(),t.TgZ(53,"div",33),t.YNc(54,pt,1,7,"app-custom-button",34),t.TgZ(55,"app-custom-button",35),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.onClickCancel())}),t.qZA(),t.YNc(56,mt,1,7,"app-custom-button",34),t.YNc(57,gt,1,7,"app-custom-button",34),t.qZA()()}if(2&s){const e=t.oxw();t.xp6(1),t.Tol("uppercase w-full h-full text-3xl"),t.Q6J("id","id_titlte")("label","ORDEN DE COMPRA"),t.xp6(2),t.Tol(""),t.Q6J("id","id_input_codigo_gasto")("label","C\xf3digo")("type","text")("autocomplete","")("control",e.formGasto.controls.codigo_gasto)("icon",""),t.xp6(1),t.Tol(""),t.Q6J("id","id_input_version")("label","Versi\xf3n")("type","text")("autocomplete","")("control",e.formGasto.controls.version)("icon",""),t.xp6(1),t.Tol(""),t.Q6J("id","id_input_fecha_vigencia")("label","Fecha Vigencia")("type","date")("autocomplete","")("control",e.formGasto.controls.fec_vigencia)("icon",""),t.xp6(1),t.Tol(""),t.Q6J("id","id_input_registro")("label","Registro")("type","text")("autocomplete","")("control",e.formGasto.controls.registro)("icon",""),t.xp6(2),t.Tol(""),t.Q6J("id","id_drop_box_area")("label","\xc1rea...")("control",e.formGasto.controls.area)("data",e.dataArea),t.xp6(2),t.Tol(""),t.Q6J("id","id_input_proveedor")("label","Proveedor")("text",e.gastoObj.proveedor.razon)("icon",""),t.xp6(1),t.Tol(""),t.Q6J("id","id_input_proveedor_nit")("label","NIT")("text",e.gastoObj.proveedor.nit)("icon",""),t.xp6(1),t.Q6J("ngIf","agregar"==e.typeRecive),t.xp6(1),t.Tol(""),t.Q6J("id","id_input_fecha_emision")("label","Fecha Emisi\xf3n")("type","date")("autocomplete","")("control",e.formGasto.controls.fec_emision)("icon",""),t.xp6(2),t.Tol(""),t.Q6J("id","id_input_tipo_cambio")("label","Tipo Cambio")("type","number")("autocomplete","")("control",e.formGasto.controls.tipo_cambio)("icon",""),t.xp6(1),t.Tol(""),t.Q6J("id","id_drop_box_area")("label","Tipo de Pago...")("control",e.formGasto.controls.tipo_pago)("data",e.dataTipoPago),t.xp6(1),t.Tol(""),t.Q6J("id","id_input_tiempo_credito")("label","Tiempo de Cr\xe9dito")("type","text")("autocomplete","")("control",e.formGasto.controls.tiempo_credito)("icon",""),t.xp6(1),t.Tol(""),t.Q6J("id","id_input_tiempo_credito")("label","Descripci\xf3n")("type","text")("autocomplete","")("control",e.formGasto.controls.descripcion)("icon",""),t.xp6(1),t.Tol(""),t.Q6J("id","id_input_fecha_entrega")("label","Fecha de Entrega")("type","date")("autocomplete","")("control",e.formGasto.controls.fec_entrega)("icon",""),t.xp6(3),t.Tol(""),t.Q6J("id","id_title_detalle")("label","Datos de Compra"),t.xp6(19),t.Q6J("ngForOf",e.gastoObj.detalle),t.xp6(1),t.Q6J("ngIf","ver"!=e.typeRecive),t.xp6(3),t.Tol("w-full"),t.Q6J("id","id_label_total_pagar")("label","SubTotal Compras")("text",t.Dn7(46,138,e.transformCostos("Sub Total"),"BOB","Bs. ")),t.xp6(2),t.Tol("w-full"),t.Q6J("ngClass",t.VKq(154,_t,"agregar"==e.typeRecive))("id","id_label_descuento")("label","Descuento")("text",t.Dn7(48,142,e.transformCostos("Descuento"),"BOB","Bs. ")),t.xp6(2),t.Tol("w-full"),t.Q6J("id","id_label_total_compras_bs")("label","Total Compras")("text",t.Dn7(50,146,e.transformCostos("Total Bs"),"BOB","Bs. ")),t.xp6(2),t.Tol("w-full"),t.Q6J("id","id_label_total_compras_sus")("label","Total Compras")("text",t.Dn7(52,150,e.transformCostos("Total Sus"),"USD","USD ")),t.xp6(3),t.Q6J("ngIf","ver"!=e.typeRecive),t.xp6(1),t.Tol(""),t.Q6J("id","id_btn_cancelar")("label","ver"==e.typeRecive?"Cerrar":"Cancelar")("type","cancel")("icon","")("valid",!0),t.xp6(1),t.Q6J("ngIf","ver"==e.typeRecive),t.xp6(1),t.Q6J("ngIf","ver"==e.typeRecive)}}let ht=(()=>{class s{constructor(e,a,o,n,u,m){this.router=e,this.gastoService=a,this.gastoDetalleService=o,this.proovedorService=n,this.toast=u,this.imgService=m,this.response=new t.vpe,this.dataLocalStorage={usuario:null,loggedDate:""},this.isLoading=!1,this.alertInfo=!1,this.alertConfirmacion=!1,this.alertError=!1,this.msgAlert="",this.formGasto=new i.cw({codigo_gasto:new i.NI("s",[i.kI.required]),version:new i.NI("2",[i.kI.required]),fec_vigencia:new i.NI("",[i.kI.required]),registro:new i.NI("",[i.kI.required]),tipo_gasto:new i.NI("Compra",[i.kI.required]),area:new i.NI("",[i.kI.required]),fec_emision:new i.NI("",[i.kI.required]),id_proveedor:new i.NI(0,[i.kI.required]),tipo_cambio:new i.NI(6.96,[i.kI.required]),tipo_pago:new i.NI("",[i.kI.required]),tiempo_credito:new i.NI("",[i.kI.required]),descripcion:new i.NI("",[i.kI.required]),fec_entrega:new i.NI("",[i.kI.required]),sub_total:new i.NI(0,[i.kI.required]),descuento:new i.NI(0,[i.kI.required]),total_bs:new i.NI(0,[i.kI.required]),total_sus:new i.NI(0,[i.kI.required])}),this.formAddDetalle=new i.cw({descripcion:new i.NI("",[i.kI.required]),cantidad:new i.NI(0,[i.kI.required]),unidad_medida:new i.NI("",[i.kI.required]),precio_unidad:new i.NI(0,[i.kI.required]),precio_total:new i.NI(0,[i.kI.required])}),this.typeDatePicker="",this.fechaNow=(0,l.p6)(new Date,"dd/MM/yyyy","es"),this.showBusqueda=!1,this.showDatePicker=!1,this.showAlertDescuento=!1,this.labelDatePicker="",this.fechaSendDatePicker="",this.gastoObj={codigo_gasto:"",version:"",fec_vigencia:"",registro:"",tipo_gasto:"",area:"",fec_emision:"",id_proveedor:0,proveedor:{id_proveedor:0,razon:"",nit:"",banco:"",nro_cuenta:"",beneficiario:"",moneda:"",fec_crea:"",user_crea:"",fec_mod:"",user_mod:""},detalle:[],tipo_cambio:0,tipo_pago:"",tiempo_credito:"",descripcion:"",fec_entrega:"",sub_total:0,descuento:0,total_bs:0,total_sus:0,fec_crea:"",user_crea:"",fec_mod:"",user_mod:""},this.dataArea=x.bT,this.dataTipoPago=x.qf,this.dataUnidadMedida=x.F$,this.emitResponse=!1,null!=(0,g.WX)()?(this.dataLocalStorage=(0,g.WX)(),null!=this.dataLocalStorage.usuario?this.userLogeado=this.dataLocalStorage.usuario:((0,g.rr)(),(0,h.ni)(this.router))):((0,g.rr)(),(0,h.ni)(this.router))}ngOnInit(){switch((0,A.wQ)(),this.formGasto.controls.codigo_gasto.disable(),this.typeRecive){case"agregar":this.showBusqueda=!0;break;case"ver":this.formGastosSetDisable(),this.isLoading=!0,this.formGasto.controls.codigo_gasto.setValue(this.codeRecive),this.getGasto()}}generarCodGasto(e){const a=String(this.formGasto.controls.area.value);this.formGasto.controls.codigo_gasto.setValue("INGLAB-ADM-CONT-"+a+"-"+e)}generatedFechaSolicitudHoy(){return(0,l.p6)(new Date,"yyyy-MM-dd","es")}transformFecha(e){switch(e){case"Vigencia":let a=String(this.formGasto.controls.fec_vigencia.value);return""!==a?(0,l.p6)(a,"dd/MM/yyyy","es"):"";case"Emision":let o=String(this.formGasto.controls.fec_emision.value);return""!==o?(0,l.p6)(o,"dd/MM/yyyy","es"):"";case"Entrega":let n=String(this.formGasto.controls.fec_entrega.value);return""!==n?(0,l.p6)(n,"dd/MM/yyyy","es"):"";default:return""}}transformCostos(e){switch(e){case"Sub Total":return String(this.formGasto.controls.sub_total.value);case"Descuento":return String(this.formGasto.controls.descuento.value);case"Total Bs":return String(this.formGasto.controls.total_bs.value);case"Total Sus":return String(this.formGasto.controls.total_sus.value);default:return""}}actualizarCostos(){let e=0;for(let a=0;a<this.gastoObj.detalle.length;a++)e+=this.gastoObj.detalle[a].precio_total;if(e>0){const a=Number(this.formGasto.controls.tipo_cambio.value);this.formGasto.controls.sub_total.setValue(e);const n=e-Number(this.formGasto.controls.descuento.value);this.formGasto.controls.total_bs.setValue(n),this.formGasto.controls.total_sus.setValue(n/a)}else this.formGasto.controls.sub_total.setValue(e),this.formGasto.controls.total_bs.setValue(0),this.formGasto.controls.total_sus.setValue(0)}limpiarFormAddDetalle(){this.formAddDetalle.controls.descripcion.setValue(""),this.formAddDetalle.controls.cantidad.setValue(0),this.formAddDetalle.controls.unidad_medida.setValue(""),this.formAddDetalle.controls.precio_unidad.setValue(0),this.formAddDetalle.controls.precio_total.setValue(0)}precioAddItem(){const e=Number(this.formAddDetalle.controls.cantidad.value),a=Number(this.formAddDetalle.controls.precio_unidad.value);this.formAddDetalle.controls.precio_total.setValue(e*a)}formGastoSetEnable(){this.formGasto.controls.version.enable(),this.formGasto.controls.fec_vigencia.enable(),this.formGasto.controls.registro.enable(),this.formGasto.controls.tipo_gasto.enable(),this.formGasto.controls.area.enable(),this.formGasto.controls.fec_emision.enable(),this.formGasto.controls.id_proveedor.enable(),this.formGasto.controls.tipo_cambio.enable(),this.formGasto.controls.tipo_pago.enable(),this.formGasto.controls.tiempo_credito.enable(),this.formGasto.controls.descripcion.enable(),this.formGasto.controls.fec_entrega.enable(),this.formGasto.controls.sub_total.enable(),this.formGasto.controls.descuento.enable(),this.formGasto.controls.total_bs.enable(),this.formGasto.controls.total_sus.enable()}formGastosSetDisable(){this.formGasto.controls.version.disable(),this.formGasto.controls.fec_vigencia.disable(),this.formGasto.controls.registro.disable(),this.formGasto.controls.tipo_gasto.disable(),this.formGasto.controls.area.disable(),this.formGasto.controls.fec_emision.disable(),this.formGasto.controls.id_proveedor.disable(),this.formGasto.controls.tipo_cambio.disable(),this.formGasto.controls.tipo_pago.disable(),this.formGasto.controls.tiempo_credito.disable(),this.formGasto.controls.descripcion.disable(),this.formGasto.controls.fec_entrega.disable(),this.formGasto.controls.sub_total.disable(),this.formGasto.controls.descuento.disable(),this.formGasto.controls.total_bs.disable(),this.formGasto.controls.total_sus.disable()}onClickShowFechaSelect(e,a){if("ver"!==this.typeRecive){switch(this.typeDatePicker=e,this.labelDatePicker=a,e){case"Vigencia":this.fechaSendDatePicker=String(this.formGasto.controls.fec_vigencia.value);break;case"Emision":this.fechaSendDatePicker=String(this.formGasto.controls.fec_emision.value);break;case"Entrega":this.fechaSendDatePicker=String(this.formGasto.controls.fec_entrega.value)}this.showDatePicker=!0}}onClickBusquedaProveedor(){this.showBusqueda=!0}onClickAddDetalle(){if(this.formAddDetalle.valid){const e={codigo_gasto:"",sec:0,descripcion:String(this.formAddDetalle.controls.descripcion.value),cantidad:Number(this.formAddDetalle.controls.cantidad.value),unidad_medida:String(this.formAddDetalle.controls.unidad_medida.value),precio_unidad:Number(this.formAddDetalle.controls.precio_unidad.value),precio_total:Number(this.formAddDetalle.controls.precio_total.value),fec_crea:"",user_crea:this.userLogeado.user,fec_mod:"",user_mod:this.userLogeado.user};this.gastoObj.detalle.push(e),this.limpiarFormAddDetalle(),this.actualizarCostos()}else this.customErrorToast("Campos de detalle necesarios.")}onClickDescuento(){"agregar"===this.typeRecive&&(this.showAlertDescuento=!0)}onClickAgregarGasto(){this.formGasto.valid&&(this.isLoading=!0,"agregar"===this.typeRecive&&this.agregarGasto())}onClickCancel(){this.response.emit(this.emitResponse)}onChange(e){this.precioAddItem()}onClickEliminarItem(e){this.gastoObj.detalle.splice(e,1),this.actualizarCostos()}onClickPDF(e){this.imgService.getImageBase64("assets/images/logo.png").subscribe(o=>{!function R(s,r,e){var a={pageSize:"Letter",info:{title:"INGENIALAB "+r.codigo_gasto,author:"INGENIALAB",subject:"GASTOS",keywords:r.area},content:[{table:{widths:["auto","*","auto","*"],body:[[{text:"C\xf3digo: "+r.codigo_gasto,fontSize:8},{text:"REGISTRO",colSpan:2,alignment:"center",bold:!0},{},{image:e,width:110,rowSpan:4,alignment:"center"}],[{text:"Versi\xf3n: "+r.version,fontSize:8},{text:"ORDEN DE COMPRA",colSpan:2,rowSpan:3,alignment:"center",bold:!0,margin:[0,10,0,10]},{},{}],[{text:"Vigencia desde: "+r.fec_vigencia,fontSize:8},{},{},{}],[{text:"Registro: "+r.registro,fontSize:8},{},{},{}],[{text:" ",border:[!1]},{text:"",border:[!1]},{text:"",border:[!1]},{text:"",border:[!1]}],[{text:"\xc1REA",bold:!0},{text:B(r.area),alignment:"center"},{text:"FECHA DE EMISI\xd3N",bold:!0},{text:E(r.fec_emision),alignment:"center"}],[{text:"PROVEEDOR",bold:!0},{text:r.proveedor.razon.toUpperCase(),alignment:"center",colSpan:3},{},{}],[{text:"NIT PROVEEDOR",bold:!0},{text:r.proveedor.nit,alignment:"center"},{text:"TIPO DE CAMBIO",bold:!0},{text:String(r.tipo_cambio),alignment:"center"}],[{text:"TIPO DE PAGO",bold:!0},{text:r.tipo_pago,alignment:"center"},{text:"TIEMPO DE CR\xc9DITO",bold:!0},{text:r.tiempo_credito,alignment:"center"}],[{text:"DESCRIPCION",bold:!0},{text:r.descripcion,alignment:"center"},{text:"FECHA DE ENTREGA",bold:!0},{text:E(r.fec_entrega),alignment:"center"}],[{text:" ",border:[!1]},{text:"",border:[!1]},{text:"",border:[!1]},{text:"",border:[!1]}],[{text:"II.- DATOS DE COMPRA ",bold:!0,colSpan:4,color:v,fillColor:k},{},{},{}],[{text:" ",border:[!1]},{text:"",border:[!1]},{text:"",border:[!1]},{text:"",border:[!1]}]]},layout:{defaultBorder:!0,hLineWidth:function(o,n){return.1},vLineWidth:function(o,n){return.1},hLineColor:function(o,n){return d},vLineColor:function(o,n){return d}},color:d,fontSize:9},{table:{widths:["auto","*","auto","*","auto","auto"],body:J(r)},layout:{defaultBorder:!0,hLineWidth:function(o,n){return.1},vLineWidth:function(o,n){return.1},hLineColor:function(o,n){return d},vLineColor:function(o,n){return d}},color:d,fontSize:9,margin:[0,0,0,0]}],footer:(o,n)=>o===n?{margin:[40,-160,40,0],stack:[{table:{widths:[90,"*"],body:[[{text:"III.- DATOS BANCARIOS",bold:!0,colSpan:2,color:v,fillColor:k},{}],[{text:"NRO DE CUENTA",bold:!0},{text:r.proveedor.nro_cuenta,alignment:"center"}],[{text:"BANCO",bold:!0},{text:r.proveedor.banco,alignment:"center"}],[{text:"BENEFICIARIO",bold:!0},{text:r.proveedor.beneficiario,alignment:"center"}],[{text:"MONEDA",bold:!0},{text:r.proveedor.moneda,alignment:"center"}],[{text:" ",border:[!1]},{text:"",border:[!1]}]]},layout:{defaultBorder:!0,hLineWidth:function(u,m){return.1},vLineWidth:function(u,m){return.1},hLineColor:function(u,m){return d},vLineColor:function(u,m){return d}},color:d,fontSize:9},{table:{widths:["*","*"],body:[[{text:"ELABORADO POR:\n\n\n\n",bold:!0},{text:"REVISADO Y APROBADO POR:\n\n\n\n",bold:!0}],[{text:"(FIRMA / SELLO)"},{text:"(FIRMA / SELLO)"}],[{text:"Nombre y apellido:",italics:!0},{text:"Nombre y apellido:",italics:!0}]]},layout:{defaultBorder:!0,hLineWidth:function(u,m){return.1},vLineWidth:function(u,m){return.1},hLineColor:function(u,m){return d},vLineColor:function(u,m){return d}},color:d,fontSize:9},{text:`P\xe1gina ${o} de ${n}`,alignment:"center",margin:[0,10,0,20],fontSize:8}]}:{margin:[0,0,0,20],columns:[{text:`P\xe1gina ${o} de ${n}`,alignment:"center"}]},pageMargins:[40,40]};switch(s){case"descargar":D.createPdf(a).download(r.codigo_gasto+".pdf");break;case"imprimir":D.createPdf(a).open()}}(e,this.gastoObj,o)})}getLastCode(e){this.gastoService.findLastCode(e).subscribe(a=>{if(a.boolean){const o=a.data;this.generarCodGasto((0,M.PP)(o[o.length-1].codigo_gasto))}else this.generarCodGasto("0001");this.isLoading=!1})}getGasto(){this.gastoService.gastoGet(this.codeRecive).subscribe(e=>{1===e.rows?(this.gastoObj=e.data[0],this.formGasto.controls.codigo_gasto.setValue(this.gastoObj.codigo_gasto),this.formGasto.controls.version.setValue(this.gastoObj.version),this.formGasto.controls.fec_vigencia.setValue(this.gastoObj.fec_vigencia),this.formGasto.controls.registro.setValue(this.gastoObj.registro),this.formGasto.controls.tipo_gasto.setValue(this.gastoObj.tipo_gasto),this.formGasto.controls.area.setValue(this.gastoObj.area),this.formGasto.controls.fec_emision.setValue(this.gastoObj.fec_emision),this.formGasto.controls.id_proveedor.setValue(this.gastoObj.id_proveedor),this.formGasto.controls.tipo_cambio.setValue(this.gastoObj.tipo_cambio),this.formGasto.controls.tipo_pago.setValue(this.gastoObj.tipo_pago),this.formGasto.controls.tiempo_credito.setValue(this.gastoObj.tiempo_credito),this.formGasto.controls.descripcion.setValue(this.gastoObj.descripcion),this.formGasto.controls.fec_entrega.setValue(this.gastoObj.fec_entrega),this.formGasto.controls.sub_total.setValue(this.gastoObj.sub_total),this.formGasto.controls.descuento.setValue(this.gastoObj.descuento),this.formGasto.controls.total_bs.setValue(this.gastoObj.total_bs),this.formGasto.controls.total_sus.setValue(this.gastoObj.total_sus)):(this.customErrorToast(e.message),this.response.emit(!1)),this.isLoading=!1})}agregarGasto(){const e={codigo_gasto:this.formGasto.controls.codigo_gasto.value,version:this.formGasto.controls.version.value,fec_vigencia:this.formGasto.controls.fec_vigencia.value,registro:this.formGasto.controls.registro.value,tipo_gasto:this.formGasto.controls.tipo_gasto.value,area:this.formGasto.controls.area.value,fec_emision:this.formGasto.controls.fec_emision.value,id_proveedor:this.formGasto.controls.id_proveedor.value,tipo_cambio:this.formGasto.controls.tipo_cambio.value,tipo_pago:this.formGasto.controls.tipo_pago.value,tiempo_credito:this.formGasto.controls.tiempo_credito.value,descripcion:this.formGasto.controls.descripcion.value,fec_entrega:this.formGasto.controls.fec_entrega.value,sub_total:this.formGasto.controls.sub_total.value,descuento:this.formGasto.controls.descuento.value,total_bs:this.formGasto.controls.total_bs.value,total_sus:this.formGasto.controls.total_sus.value,user_crea:this.userLogeado.user,user_mod:this.userLogeado.user};this.gastoService.gastoRegistro(e).subscribe(a=>{a.boolean?(this.gastoObj.codigo_gasto=e.codigo_gasto,this.gastoObj.version=e.version,this.gastoObj.fec_vigencia=e.fec_vigencia,this.gastoObj.registro=e.registro,this.gastoObj.tipo_gasto=e.tipo_gasto,this.gastoObj.area=e.area,this.gastoObj.fec_emision=e.fec_emision,this.gastoObj.id_proveedor=e.id_proveedor,this.gastoObj.tipo_cambio=e.tipo_cambio,this.gastoObj.tipo_pago=e.tipo_pago,this.gastoObj.tiempo_credito=e.tiempo_credito,this.gastoObj.descripcion=e.descripcion,this.gastoObj.fec_entrega=e.fec_entrega,this.gastoObj.sub_total=e.sub_total,this.gastoObj.descuento=e.descuento,this.gastoObj.total_bs=e.total_bs,this.gastoObj.total_sus=e.total_sus,this.agregarGastoDetalle()):(this.customErrorToast(a.message),this.isLoading=!1)})}agregarGastoDetalle(){const e=String(this.formGasto.controls.codigo_gasto.value),a=[],o=this.gastoObj.detalle;for(let n=0;n<o.length;n++){const u=o[n];a.push({codigo_gasto:e,sec:n+1,descripcion:u.descripcion,cantidad:u.cantidad,unidad_medida:u.unidad_medida,precio_unidad:u.precio_unidad,precio_total:u.precio_total,user_crea:this.userLogeado.user,user_mod:this.userLogeado.user})}this.gastoDetalleService.gastoDetalleAdd(a).subscribe(n=>{n.boolean?(this.customSuccessToast(n.message),this.emitResponse=!0,this.typeRecive="ver",this.formGastosSetDisable()):this.customErrorToast(n.message),this.isLoading=!1})}inputDescuentoResponse(e){e.bool&&(this.formGasto.controls.descuento.setValue(e.data),this.actualizarCostos()),this.showAlertDescuento=!1}busquedaProveedorResponse(e){null===e?0===this.gastoObj.proveedor.id_proveedor?this.response.emit(!1):this.showBusqueda=!1:(this.gastoObj.proveedor=e,this.formGasto.controls.id_proveedor.setValue(this.gastoObj.proveedor.id_proveedor),this.showBusqueda=!1)}fechaSelectResponse(e){switch(this.typeDatePicker){case"Vigencia":this.formGasto.controls.fec_vigencia.setValue(e);break;case"Emision":this.formGasto.controls.fec_emision.setValue(e);break;case"Entrega":this.formGasto.controls.fec_entrega.setValue(e)}this.showDatePicker=!1}customSuccessToast(e){this.toast.success(e,{duration:2e3,style:{border:"1px solid #2e798c",padding:"16px",color:"#2b6273"},iconTheme:{primary:"#3494a6",secondary:"#FFFAEE"}})}customErrorToast(e){this.toast.error(e,{duration:2e3,style:{border:"1px solid #ef445f",padding:"16px",color:"#ef445f"},iconTheme:{primary:"#ef445f",secondary:"#FFFAEE"}})}customLoadingToast(e){this.toast.loading(e,{duration:1e4,style:{border:"1px solid #2b59c3",padding:"16px",color:"#2b59c3"},iconTheme:{primary:"#2b59c3",secondary:"#FFFAEE"}})}onChangeArea(e){const a=String(e.target.value);""!==a?(this.isLoading=!0,this.getLastCode(a)):this.formGasto.controls.codigo_gasto.setValue("")}static#t=this.\u0275fac=function(a){return new(a||s)(t.Y36(p.F0),t.Y36(f),t.Y36(P),t.Y36(S.k),t.Y36(_.jE),t.Y36(Q))};static#e=this.\u0275cmp=t.Xpm({type:s,selectors:[["app-agregar-gastos"]],inputs:{typeRecive:"typeRecive",codeRecive:"codeRecive"},outputs:{response:"response"},decls:6,vars:5,consts:[[1,"w-full","h-full","overflow-auto"],[3,"id","title","label","type","class","icon","onResponse",4,"ngIf"],["class","w-full h-full",3,"response",4,"ngIf"],[3,"label","fecha","type","response",4,"ngIf"],[4,"ngIf"],["class","flex flex-col gap-4 w-full h-max overflow-auto",4,"ngIf"],[3,"id","title","label","type","icon","onResponse"],[1,"w-full","h-full",3,"response"],[3,"label","fecha","type","response"],[1,"flex","flex-col","gap-4","w-full","h-max","overflow-auto"],[1,"w-full","text-center",3,"id","label"],[1,"flex","justify-between","gap-4","border","border-dashed","border-color-text","rounded-lg","w-full","h-max","p-2"],[1,"w-full",3,"id","label","type","autocomplete","control","icon"],[1,"w-max",3,"id","label","control","data","change"],[1,"flex","gap-2","w-full","items-center"],[1,"w-full",3,"id","label","text","icon"],[3,"icon","class","click",4,"ngIf"],[3,"id","label","type","autocomplete","control","icon"],[1,"w-max",3,"id","label","control","data"],[1,"flex","flex-col","gap-4","border","border-dashed","border-color-text","rounded-lg","w-full","h-max","p-2"],[1,"flex","w-full","mb-2"],[3,"id","label"],[1,"w-full","h-max"],[1,"w-full","text-sm","text-left","rtl:text-right","text-gray-500","border","shadow-lg"],[1,"text-xs","text-color-text","uppercase","bg-primary-100"],["scope","col",1,"px-2","py-2","text-center",2,"width","2%"],["scope","col",1,"px-2","py-2",2,"width","fit-content"],["scope","col",1,"px-2","py-2","w-max","text-center"],[4,"ngFor","ngForOf"],[1,"flex","gap-4","flex-row-reverse"],[1,"flex","flex-col","gap-2","w-max"],[3,"id","label","text"],[3,"ngClass","id","label","text","click"],[1,"flex","gap-4","w-full"],[3,"id","label","type","icon","class","valid","click",4,"ngIf"],[3,"id","label","type","icon","valid","click"],[3,"icon","click"],["fragment","",1,"bg-white","border-y"],[1,"px-2","py-2","font-medium","text-gray-900","text-center"],[1,"px-2","py-2","font-medium","text-gray-900"],[1,"px-2","py-2"],[1,"px-2","py-2","text-center"],["class","cursor-pointer underline underline-offset-2 text-color-info",3,"click",4,"ngIf"],[1,"cursor-pointer","underline","underline-offset-2","text-color-info",3,"click"],[3,"id","label","type","autocomplete","control","icon","input"],[3,"id","label","control","data"]],template:function(a,o){1&a&&(t.TgZ(0,"div",0),t.YNc(1,at,1,7,"app-custom-alert-input",1),t.YNc(2,rt,1,0,"app-custom-alert-search-proveedor",2),t.YNc(3,it,1,3,"app-custom-alert-date-picker",3),t.YNc(4,nt,1,0,"app-custom-loading",4),t.YNc(5,ft,58,156,"form",5),t.qZA()),2&a&&(t.xp6(1),t.Q6J("ngIf",o.showAlertDescuento),t.xp6(1),t.Q6J("ngIf",o.showBusqueda),t.xp6(1),t.Q6J("ngIf",o.showDatePicker),t.xp6(1),t.Q6J("ngIf",o.isLoading),t.xp6(1),t.Q6J("ngIf",!(o.isLoading||o.showBusqueda||o.showDatePicker||o.showAlertDescuento)))},dependencies:[l.mk,l.sg,l.O5,V.B,Y.S,H,b.x,G.E,q.l,O.O,tt,et.A,I.m,ot._,st.M,i._Y,i.JL,l.H9]})}return s})();function bt(s,r){if(1&s){const e=t.EpF();t.TgZ(0,"app-agregar-gastos",4),t.NdJ("response",function(o){t.CHM(e);const n=t.oxw();return t.KtG(n.agregarGastoResponse(o))}),t.qZA()}if(2&s){const e=t.oxw();t.Q6J("typeRecive",e.agregarGastoType)("codeRecive",e.codigoGasto)}}function xt(s,r){1&s&&t._UZ(0,"app-custom-loading")}function vt(s,r){if(1&s){const e=t.EpF();t.TgZ(0,"tr",20),t.NdJ("click",function(){const n=t.CHM(e).index,u=t.oxw(2);return t.KtG(u.onClickListaElement(n))}),t.TgZ(1,"td",21),t._uU(2),t.qZA(),t.TgZ(3,"td",21),t._uU(4),t.qZA(),t.TgZ(5,"td",21),t._uU(6),t.qZA(),t.TgZ(7,"td",21),t._uU(8),t.qZA(),t.TgZ(9,"td",21),t._uU(10),t.qZA(),t.TgZ(11,"td",21),t._uU(12),t.qZA(),t.TgZ(13,"td",21),t._uU(14),t.qZA(),t._UZ(15,"td",21),t.qZA()}if(2&s){const e=r.$implicit,a=r.index;t.xp6(2),t.Oqu(a+1),t.xp6(2),t.Oqu(e.codigo_gasto),t.xp6(2),t.Oqu(e.tipo_gasto),t.xp6(2),t.Oqu(e.area),t.xp6(2),t.Oqu(e.fec_emision),t.xp6(2),t.Oqu(e.total_bs),t.xp6(2),t.Oqu(e.total_sus)}}const Tt=function(s,r){return{"text-dark-600 bg-dark-50":s,"text-dark-500 bg-white cursor-pointer":r}};function At(s,r){if(1&s&&(t.TgZ(0,"ul",27)(1,"li")(2,"a",28),t._uU(3),t.qZA()()()),2&s){const e=r.$implicit,a=t.oxw(3);t.xp6(2),t.Q6J("ngClass",t.WLB(2,Tt,e==a.posPaginacion,e!=a.posPaginacion)),t.xp6(1),t.Oqu(e)}}const N=function(s){return{"cursor-pointer":s}};function Ct(s,r){if(1&s){const e=t.EpF();t.TgZ(0,"nav",22)(1,"div",23)(2,"a",24),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.anteriorLista())}),t._uU(3,"Anterior"),t.qZA(),t.YNc(4,At,4,5,"ul",25),t.TgZ(5,"a",26),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.siguienteLista())}),t._uU(6,"Siguiente"),t.qZA()()()}if(2&s){const e=t.oxw(2);t.xp6(2),t.Q6J("ngClass",t.VKq(3,N,e.posPaginacion>1)),t.xp6(2),t.Q6J("ngForOf",e.paginationArray),t.xp6(1),t.Q6J("ngClass",t.VKq(5,N,e.posPaginacion<e.paginationArray.length))}}function yt(s,r){if(1&s){const e=t.EpF();t.TgZ(0,"div",5)(1,"div",6)(2,"div",7)(3,"form",8),t._UZ(4,"app-custom-drop-box",9)(5,"app-custom-input",10),t.TgZ(6,"app-custom-icon",11),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.onClickBusqueda())}),t.qZA()()(),t.TgZ(7,"app-custom-button",12),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.onClickAgregar())}),t.qZA()(),t.TgZ(8,"div",13)(9,"div",14)(10,"table",15)(11,"thead",16)(12,"tr")(13,"th",17),t._uU(14,"#"),t.qZA(),t.TgZ(15,"th",17),t._uU(16,"C\xf3digo"),t.qZA(),t.TgZ(17,"th",17),t._uU(18,"Tipo"),t.qZA(),t.TgZ(19,"th",17),t._uU(20,"\xc1rea"),t.qZA(),t.TgZ(21,"th",17),t._uU(22,"Fecha Emisi\xf3n"),t.qZA(),t.TgZ(23,"th",17),t._uU(24,"Total Bs"),t.qZA(),t.TgZ(25,"th",17),t._uU(26,"Total $us"),t.qZA(),t._UZ(27,"th",17),t.qZA()(),t.TgZ(28,"tbody"),t.YNc(29,vt,16,7,"tr",18),t.qZA()()(),t.YNc(30,Ct,7,7,"nav",19),t.qZA()()}if(2&s){const e=t.oxw();t.xp6(3),t.Q6J("formGroup",e.formBusqueda),t.xp6(1),t.Tol("w-max"),t.Q6J("id","id_pregunta")("label","B\xfasqueda...")("control",e.formBusqueda.controls.busqueda)("data",e.dataBusquedaGasto),t.xp6(1),t.Tol("w-full flex-grow"),t.Q6J("id","id_busqueda_value")("label","B\xfasqueda...")("type","text")("autocomplete","")("control",e.formBusqueda.controls.value)("icon",""),t.xp6(1),t.Tol("h-full text-primary-600 "),t.Q6J("icon","fa-solid fa-magnifying-glass fa-xl align-bottom cursor-pointer"),t.xp6(1),t.Tol("h-full"),t.Q6J("label","Nueva Cotizaci\xf3n")("type","accept")("icon","")("valid",!0),t.xp6(22),t.Q6J("ngForOf",e.dataGastos),t.xp6(1),t.Q6J("ngIf",!1)}}const wt=[{path:"",component:(()=>{class s{constructor(e,a,o){this.router=e,this.gastoService=a,this.toast=o,this.dataLocalStorage={usuario:null,loggedDate:""},this.isLoading=!0,this.alertInfo=!1,this.alertConfirmacion=!1,this.alertError=!1,this.msgAlert="",this.formBusqueda=new i.cw({busqueda:new i.NI("codigo_gasto",[i.kI.required]),value:new i.NI("",[i.kI.required])}),this.dataBusquedaGasto=x.BC,this.dataGastos=[],this.paginationArray=[],this.showAgregar=!1,this.agregarGastoType="",this.codigoGasto="",null!=(0,g.WX)()?(this.dataLocalStorage=(0,g.WX)(),null!=this.dataLocalStorage.usuario?this.userLogeado=this.dataLocalStorage.usuario:((0,g.rr)(),(0,h.ni)(this.router))):((0,g.rr)(),(0,h.ni)(this.router))}ngOnInit(){(0,A.wQ)(),this.getListaGastos()}showListaNext(e){this.posPaginacion=e;let o=10*e-10,n=0;for(n=o+9<=this.dataGastos.length-1?o+9:this.dataGastos.length-1,this.dataGastos=[];o<=n;)this.dataGastos.push(this.dataGastos[o]),o++}anteriorLista(){this.posPaginacion-1>0&&this.showListaNext(this.posPaginacion-1)}siguienteLista(){this.posPaginacion+1<=this.paginationArray.length&&this.showListaNext(this.posPaginacion+1)}onClickBusqueda(){this.formBusqueda.valid?(this.isLoading=!0,this.getListaBusqueda()):this.formBusqueda.controls.busqueda.valid&&this.formBusqueda.controls.value.invalid&&(this.isLoading=!0,this.getListaGastos())}onClickAgregar(){this.agregarGastoType="agregar",this.showAgregar=!0}onClickListaElement(e){this.agregarGastoType="ver",this.codigoGasto=this.dataGastos[e].codigo_gasto,this.showAgregar=!0}onClickActulizar(e){}getListaGastos(){this.gastoService.gastoGetLista().subscribe(e=>{e.boolean&&(this.dataGastos=e.data),this.showAgregar=!1,this.isLoading=!1})}getListaBusqueda(){const e=String(this.formBusqueda.controls.busqueda.value),a=String(this.formBusqueda.controls.value.value);this.gastoService.gastoGetBusqueda(e,a).subscribe(o=>{this.dataGastos=[],o.boolean&&(this.dataGastos=o.data),this.isLoading=!1})}agregarGastoResponse(e){e?(this.isLoading=!0,this.getListaGastos()):this.showAgregar=!1}customSuccessToast(e){this.toast.success(e,{duration:2e3,style:{border:"1px solid #2e798c",padding:"16px",color:"#2b6273"},iconTheme:{primary:"#3494a6",secondary:"#FFFAEE"}})}customErrorToast(e){this.toast.error(e,{duration:2e3,style:{border:"1px solid #ef445f",padding:"16px",color:"#ef445f"},iconTheme:{primary:"#ef445f",secondary:"#FFFAEE"}})}customLoadingToast(e){this.toast.loading(e,{duration:1e4,style:{border:"1px solid #2b59c3",padding:"16px",color:"#2b59c3"},iconTheme:{primary:"#2b59c3",secondary:"#FFFAEE"}})}static#t=this.\u0275fac=function(a){return new(a||s)(t.Y36(p.F0),t.Y36(f),t.Y36(_.jE))};static#e=this.\u0275cmp=t.Xpm({type:s,selectors:[["app-lista-gastos"]],decls:4,vars:3,consts:[[1,"relative","w-full","h-full","shadow-lg","overflow-auto","p-4"],[3,"typeRecive","codeRecive","response",4,"ngIf"],[4,"ngIf"],["class","flex flex-col gap-2 w-full h-full",4,"ngIf"],[3,"typeRecive","codeRecive","response"],[1,"flex","flex-col","gap-2","w-full","h-full"],[1,"flex","flex-wrap","gap-2","h-max","border","rounded-lg","border-color-text","p-2","divide-x"],[1,"flex-grow"],[1,"flex","gap-1","content-center",3,"formGroup"],[3,"id","label","control","data"],[1,"flex-grow",3,"id","label","type","autocomplete","control","icon"],[3,"icon","click"],[1,"pl-6",3,"label","type","icon","valid","click"],[1,"flex","flex-col","gap-4","w-full","h-full"],[1,"overflow-auto","shadow-md","border","rounded-lg","grow"],[1,"w-max","md:w-full","text-sm","text-center","rtl:text-right","text-primary-500","table-fixed","md:table-auto"],[1,"text-sm","text-primary-800","uppercase","bg-primary-50"],["scope","col",1,"px-6","py-3"],["class","text-primary-800 bg-white border-b hover:bg-primary-50 cursor-pointer",3,"click",4,"ngFor","ngForOf"],["class","flex items-center flex-column flex-wrap h-max md:flex-row justify-between","aria-label","Table navigation",4,"ngIf"],[1,"text-primary-800","bg-white","border-b","hover:bg-primary-50","cursor-pointer",3,"click"],[1,"px-2","py-2"],["aria-label","Table navigation",1,"flex","items-center","flex-column","flex-wrap","h-max","md:flex-row","justify-between"],[1,"inline-flex","-space-x-px","rtl:space-x-reverse","text-sm","h-8"],[1,"flex","items-center","justify-center","px-3","h-8","ms-0","leading-tight","text-dark-500","bg-white","border","border-dark-300","rounded-s-lg","hover:bg-dark-100","hover:text-dark-700",3,"ngClass","click"],["class","inline-flex",4,"ngFor","ngForOf"],[1,"flex","items-center","justify-center","px-3","h-8","leading-tight","text-dark-500","bg-white","border","border-dark-300","rounded-e-lg","hover:bg-dark-100","hover:text-dark-700",3,"ngClass","click"],[1,"inline-flex"],[1,"flex","items-center","justify-center","px-3","h-8","border","border-dark-300","hover:bg-dark-100","hover:text-dark-700",3,"ngClass"]],template:function(a,o){1&a&&(t.TgZ(0,"div",0),t.YNc(1,bt,1,2,"app-agregar-gastos",1),t.YNc(2,xt,1,0,"app-custom-loading",2),t.YNc(3,yt,31,26,"div",3),t.qZA()),2&a&&(t.xp6(1),t.Q6J("ngIf",o.showAgregar),t.xp6(1),t.Q6J("ngIf",o.isLoading),t.xp6(1),t.Q6J("ngIf",!o.isLoading&&!o.showAgregar))},dependencies:[l.mk,l.sg,l.O5,b.x,G.E,q.l,O.O,I.m,i._Y,i.JL,i.sg,ht]})}return s})()}];let Gt=(()=>{class s{static#t=this.\u0275fac=function(a){return new(a||s)};static#e=this.\u0275mod=t.oAB({type:s});static#o=this.\u0275inj=t.cJS({imports:[p.Bz.forChild(wt),p.Bz]})}return s})();var Zt=c(8524);let Ot=(()=>{class s{static#t=this.\u0275fac=function(a){return new(a||s)};static#e=this.\u0275mod=t.oAB({type:s});static#o=this.\u0275inj=t.cJS({imports:[l.ez,Gt,Zt.m]})}return s})()},7661:(Z,T,c)=>{c.d(T,{B:()=>g});var l=c(6814),p=c(4946),i=c(95),A=c(9924),x=c(9564),h=c(7614);let g=(()=>{class t{constructor(){this.response=new p.vpe,this.formFecha=new i.cw({fecha:new i.NI("",[i.kI.required])})}onClickAceptar(){this.response.emit(this.formFecha.controls.fecha.value)}ngOnInit(){this.formFecha.controls.fecha.setValue(""!==this.fecha?(0,l.p6)(this.fecha,"yyyy-MM-dd","es"):"")}static#t=this.\u0275fac=function(f){return new(f||t)};static#e=this.\u0275cmp=p.Xpm({type:t,selectors:[["app-custom-alert-date-picker"]],inputs:{label:"label",fecha:"fecha",type:"type"},outputs:{response:"response"},decls:7,vars:19,consts:[[1,"flex","justify-center","items-center","w-full","h-full","bg-gray-400","bg-opacity-60","p-4"],[1,"bg-white","rounded-lg","w-full","md:w-max","h-full","md:h-max"],[1,"h-full","flex","flex-col","gap-4","p-4","text-center"],[1,"flex","flex-col","w-full","gap-4","items-center"],[3,"id","label"],[3,"id","label","type","autocomplete","control","icon"],[1,"w-full",3,"id","label","type","icon","valid","click"]],template:function(f,_){1&f&&(p.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),p._UZ(4,"app-custom-sub-title",4)(5,"app-custom-input",5),p.TgZ(6,"app-custom-button",6),p.NdJ("click",function(){return _.onClickAceptar()}),p.qZA()()()()()),2&f&&(p.xp6(4),p.Tol(""),p.Q6J("id","id_label_title_fecha")("label",_.label),p.xp6(1),p.Tol(""),p.Q6J("id","id_input_fecha")("label","Fecha")("type","date")("autocomplete","")("control",_.formFecha.controls.fecha)("icon",""),p.xp6(1),p.Tol("w-32"),p.Q6J("id","id_btn_busqueda")("label","Aceptar")("type","accept")("icon","")("valid",!0))},dependencies:[A.x,x.O,h._]})}return t})()},1897:(Z,T,c)=>{c.d(T,{S:()=>t});var l=c(4946),p=c(95),i=c(3995),A=c(2232),x=c(9924),h=c(9564),g=c(7614);let t=(()=>{class C{constructor(f){this.router=f,this.onResponse=new l.vpe,this.formCustom=new p.cw({value:new p.NI("",[p.kI.required])})}ngOnInit(){(0,i.wQ)()}onClick(f){if(f){if(this.formCustom.valid){let _;_="number"===this.type?Number(this.formCustom.controls.value.value):String(this.formCustom.controls.value.value),this.onResponse.emit({bool:f,data:_})}}else this.onResponse.emit({bool:f,data:null})}static#t=this.\u0275fac=function(_){return new(_||C)(l.Y36(A.F0))};static#e=this.\u0275cmp=l.Xpm({type:C,selectors:[["app-custom-alert-input"]],inputs:{id:"id",title:"title",label:"label",type:"type",icon:"icon"},outputs:{onResponse:"onResponse"},decls:9,vars:26,consts:[[1,"flex","justify-center","items-center","w-full","h-full","bg-gray-400","bg-opacity-60","p-4"],[1,"bg-white","rounded-lg","w-full","md:w-max","h-max","md:h-max"],[1,"h-full","flex","flex-col","gap-4","p-4","text-center"],[3,"id","label"],[1,"flex","flex-col","md:flex-row","w-full","gap-4","items-center"],[1,"w-full",3,"id","label","type","autocomplete","control","icon"],[1,"flex","justify-around","gap-4"],[3,"id","label","type","icon","valid","click"]],template:function(_,b){1&_&&(l.TgZ(0,"div",0)(1,"div",1)(2,"div",2),l._UZ(3,"app-custom-sub-title",3),l.TgZ(4,"div",4),l._UZ(5,"app-custom-input",5),l.qZA(),l.TgZ(6,"div",6)(7,"app-custom-button",7),l.NdJ("click",function(){return b.onClick(!0)}),l.qZA(),l.TgZ(8,"app-custom-button",7),l.NdJ("click",function(){return b.onClick(!1)}),l.qZA()()()()()),2&_&&(l.xp6(3),l.Tol(""),l.Q6J("id","id_title_alert")("label",b.title),l.xp6(2),l.Tol(""),l.Q6J("id","id_input_value")("label",b.label)("type",b.type)("autocomplete","text")("control",b.formCustom.controls.value)("icon",b.icon),l.xp6(2),l.Tol("w-32"),l.Q6J("id","id_btn_busqueda")("label","Aceptar")("type","accept")("icon","")("valid",b.formCustom.valid),l.xp6(1),l.Tol("w-32"),l.Q6J("id","id_btn_busqueda")("label","Cancelar")("type","cancel")("icon","")("valid",!0))},dependencies:[x.x,h.O,g._]})}return C})()},2010:(Z,T,c)=>{c.d(T,{A:()=>p});var l=c(4946);let p=(()=>{class i{static#t=this.\u0275fac=function(h){return new(h||i)};static#e=this.\u0275cmp=l.Xpm({type:i,selectors:[["app-custom-label0"]],inputs:{id:"id",label:"label",text:"text",class:"class"},decls:6,vars:4,consts:[[1,"grid","grid-cols-2","items-center","text-sm","text-color-text","border","border-color-text","rounded-lg","px-4","py-1"],[1,"w-max"],[1,"text-right"]],template:function(h,g){1&h&&(l.TgZ(0,"div",0)(1,"p",1)(2,"strong"),l._uU(3),l.qZA()(),l.TgZ(4,"p",2),l._uU(5),l.qZA()()),2&h&&(l.Tol(g.class),l.xp6(3),l.hij("",g.label,": "),l.xp6(2),l.Oqu(g.text))}})}return i})()}}]);